'use strict';

var cov_1cllkjyp0k = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-definitions/spec/DefinitionHyperclick-spec.js',
      hash = '459d9d1a83d7360459c4d4916ba50b2dc80e6d3f',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-definitions/spec/DefinitionHyperclick-spec.js',
    statementMap: {
      '0': {
        start: {
          line: 23,
          column: 0
        },
        end: {
          line: 215,
          column: 3
        }
      },
      '1': {
        start: {
          line: 25,
          column: 49
        },
        end: {
          line: 30,
          column: 3
        }
      },
      '2': {
        start: {
          line: 29,
          column: 25
        },
        end: {
          line: 29,
          column: 46
        }
      },
      '3': {
        start: {
          line: 32,
          column: 19
        },
        end: {
          line: 32,
          column: 34
        }
      },
      '4': {
        start: {
          line: 36,
          column: 2
        },
        end: {
          line: 55,
          column: 5
        }
      },
      '5': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 37,
          column: 58
        }
      },
      '6': {
        start: {
          line: 38,
          column: 4
        },
        end: {
          line: 38,
          column: 30
        }
      },
      '7': {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 43,
          column: 6
        }
      },
      '8': {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 54,
          column: 6
        }
      },
      '9': {
        start: {
          line: 52,
          column: 8
        },
        end: {
          line: 52,
          column: 21
        }
      },
      '10': {
        start: {
          line: 57,
          column: 2
        },
        end: {
          line: 59,
          column: 5
        }
      },
      '11': {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 58,
          column: 26
        }
      },
      '12': {
        start: {
          line: 61,
          column: 2
        },
        end: {
          line: 69,
          column: 5
        }
      },
      '13': {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 68,
          column: 7
        }
      },
      '14': {
        start: {
          line: 63,
          column: 6
        },
        end: {
          line: 63,
          column: 65
        }
      },
      '15': {
        start: {
          line: 64,
          column: 6
        },
        end: {
          line: 64,
          column: 34
        }
      },
      '16': {
        start: {
          line: 65,
          column: 6
        },
        end: {
          line: 65,
          column: 48
        }
      },
      '17': {
        start: {
          line: 66,
          column: 21
        },
        end: {
          line: 66,
          column: 67
        }
      },
      '18': {
        start: {
          line: 67,
          column: 6
        },
        end: {
          line: 67,
          column: 32
        }
      },
      '19': {
        start: {
          line: 71,
          column: 2
        },
        end: {
          line: 81,
          column: 5
        }
      },
      '20': {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 80,
          column: 7
        }
      },
      '21': {
        start: {
          line: 73,
          column: 18
        },
        end: {
          line: 73,
          column: 76
        }
      },
      '22': {
        start: {
          line: 74,
          column: 6
        },
        end: {
          line: 74,
          column: 34
        }
      },
      '23': {
        start: {
          line: 75,
          column: 6
        },
        end: {
          line: 75,
          column: 48
        }
      },
      '24': {
        start: {
          line: 76,
          column: 21
        },
        end: {
          line: 76,
          column: 67
        }
      },
      '25': {
        start: {
          line: 78,
          column: 6
        },
        end: {
          line: 78,
          column: 32
        }
      },
      '26': {
        start: {
          line: 79,
          column: 6
        },
        end: {
          line: 79,
          column: 57
        }
      },
      '27': {
        start: {
          line: 83,
          column: 2
        },
        end: {
          line: 117,
          column: 5
        }
      },
      '28': {
        start: {
          line: 84,
          column: 4
        },
        end: {
          line: 116,
          column: 7
        }
      },
      '29': {
        start: {
          line: 85,
          column: 25
        },
        end: {
          line: 97,
          column: 7
        }
      },
      '30': {
        start: {
          line: 98,
          column: 18
        },
        end: {
          line: 100,
          column: 7
        }
      },
      '31': {
        start: {
          line: 102,
          column: 6
        },
        end: {
          line: 102,
          column: 34
        }
      },
      '32': {
        start: {
          line: 103,
          column: 6
        },
        end: {
          line: 103,
          column: 48
        }
      },
      '33': {
        start: {
          line: 104,
          column: 21
        },
        end: {
          line: 104,
          column: 67
        }
      },
      '34': {
        start: {
          line: 106,
          column: 6
        },
        end: {
          line: 106,
          column: 32
        }
      },
      '35': {
        start: {
          line: 107,
          column: 6
        },
        end: {
          line: 107,
          column: 58
        }
      },
      '36': {
        start: {
          line: 108,
          column: 6
        },
        end: {
          line: 108,
          column: 57
        }
      },
      '37': {
        start: {
          line: 109,
          column: 6
        },
        end: {
          line: 109,
          column: 50
        }
      },
      '38': {
        start: {
          line: 111,
          column: 6
        },
        end: {
          line: 111,
          column: 32
        }
      },
      '39': {
        start: {
          line: 112,
          column: 6
        },
        end: {
          line: 112,
          column: 41
        }
      },
      '40': {
        start: {
          line: 113,
          column: 6
        },
        end: {
          line: 113,
          column: 55
        }
      },
      '41': {
        start: {
          line: 114,
          column: 6
        },
        end: {
          line: 114,
          column: 24
        }
      },
      '42': {
        start: {
          line: 115,
          column: 6
        },
        end: {
          line: 115,
          column: 79
        }
      },
      '43': {
        start: {
          line: 119,
          column: 2
        },
        end: {
          line: 183,
          column: 5
        }
      },
      '44': {
        start: {
          line: 120,
          column: 4
        },
        end: {
          line: 182,
          column: 7
        }
      },
      '45': {
        start: {
          line: 121,
          column: 19
        },
        end: {
          line: 148,
          column: 7
        }
      },
      '46': {
        start: {
          line: 149,
          column: 18
        },
        end: {
          line: 151,
          column: 7
        }
      },
      '47': {
        start: {
          line: 153,
          column: 6
        },
        end: {
          line: 153,
          column: 34
        }
      },
      '48': {
        start: {
          line: 154,
          column: 6
        },
        end: {
          line: 154,
          column: 48
        }
      },
      '49': {
        start: {
          line: 155,
          column: 44
        },
        end: {
          line: 158,
          column: 7
        }
      },
      '50': {
        start: {
          line: 160,
          column: 6
        },
        end: {
          line: 160,
          column: 32
        }
      },
      '51': {
        start: {
          line: 161,
          column: 6
        },
        end: {
          line: 161,
          column: 52
        }
      },
      '52': {
        start: {
          line: 162,
          column: 6
        },
        end: {
          line: 162,
          column: 57
        }
      },
      '53': {
        start: {
          line: 163,
          column: 6
        },
        end: {
          line: 163,
          column: 50
        }
      },
      '54': {
        start: {
          line: 167,
          column: 12
        },
        end: {
          line: 167,
          column: 32
        }
      },
      '55': {
        start: {
          line: 169,
          column: 6
        },
        end: {
          line: 169,
          column: 39
        }
      },
      '56': {
        start: {
          line: 170,
          column: 6
        },
        end: {
          line: 170,
          column: 54
        }
      },
      '57': {
        start: {
          line: 171,
          column: 6
        },
        end: {
          line: 171,
          column: 60
        }
      },
      '58': {
        start: {
          line: 172,
          column: 6
        },
        end: {
          line: 172,
          column: 54
        }
      },
      '59': {
        start: {
          line: 173,
          column: 6
        },
        end: {
          line: 173,
          column: 60
        }
      },
      '60': {
        start: {
          line: 174,
          column: 6
        },
        end: {
          line: 174,
          column: 51
        }
      },
      '61': {
        start: {
          line: 175,
          column: 6
        },
        end: {
          line: 175,
          column: 60
        }
      },
      '62': {
        start: {
          line: 177,
          column: 6
        },
        end: {
          line: 177,
          column: 30
        }
      },
      '63': {
        start: {
          line: 178,
          column: 6
        },
        end: {
          line: 181,
          column: 9
        }
      },
      '64': {
        start: {
          line: 185,
          column: 2
        },
        end: {
          line: 214,
          column: 5
        }
      },
      '65': {
        start: {
          line: 186,
          column: 4
        },
        end: {
          line: 213,
          column: 7
        }
      },
      '66': {
        start: {
          line: 187,
          column: 18
        },
        end: {
          line: 199,
          column: 7
        }
      },
      '67': {
        start: {
          line: 200,
          column: 26
        },
        end: {
          line: 205,
          column: 7
        }
      },
      '68': {
        start: {
          line: 204,
          column: 29
        },
        end: {
          line: 204,
          column: 49
        }
      },
      '69': {
        start: {
          line: 206,
          column: 6
        },
        end: {
          line: 206,
          column: 76
        }
      },
      '70': {
        start: {
          line: 207,
          column: 6
        },
        end: {
          line: 207,
          column: 34
        }
      },
      '71': {
        start: {
          line: 208,
          column: 6
        },
        end: {
          line: 208,
          column: 48
        }
      },
      '72': {
        start: {
          line: 209,
          column: 21
        },
        end: {
          line: 209,
          column: 67
        }
      },
      '73': {
        start: {
          line: 210,
          column: 6
        },
        end: {
          line: 210,
          column: 36
        }
      },
      '74': {
        start: {
          line: 211,
          column: 6
        },
        end: {
          line: 211,
          column: 32
        }
      },
      '75': {
        start: {
          line: 212,
          column: 6
        },
        end: {
          line: 212,
          column: 51
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 23,
            column: 33
          },
          end: {
            line: 23,
            column: 34
          }
        },
        loc: {
          start: {
            line: 23,
            column: 39
          },
          end: {
            line: 215,
            column: 1
          }
        },
        line: 23
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 29,
            column: 19
          },
          end: {
            line: 29,
            column: 20
          }
        },
        loc: {
          start: {
            line: 29,
            column: 25
          },
          end: {
            line: 29,
            column: 46
          }
        },
        line: 29
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 36,
            column: 13
          },
          end: {
            line: 36,
            column: 14
          }
        },
        loc: {
          start: {
            line: 36,
            column: 19
          },
          end: {
            line: 55,
            column: 3
          }
        },
        line: 36
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 51,
            column: 62
          },
          end: {
            line: 51,
            column: 63
          }
        },
        loc: {
          start: {
            line: 51,
            column: 67
          },
          end: {
            line: 53,
            column: 7
          }
        },
        line: 51
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 57,
            column: 13
          }
        },
        loc: {
          start: {
            line: 57,
            column: 18
          },
          end: {
            line: 59,
            column: 3
          }
        },
        line: 57
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 61,
            column: 30
          },
          end: {
            line: 61,
            column: 31
          }
        },
        loc: {
          start: {
            line: 61,
            column: 36
          },
          end: {
            line: 69,
            column: 3
          }
        },
        line: 61
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 62,
            column: 20
          },
          end: {
            line: 62,
            column: 21
          }
        },
        loc: {
          start: {
            line: 62,
            column: 32
          },
          end: {
            line: 68,
            column: 5
          }
        },
        line: 62
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 71,
            column: 22
          },
          end: {
            line: 71,
            column: 23
          }
        },
        loc: {
          start: {
            line: 71,
            column: 28
          },
          end: {
            line: 81,
            column: 3
          }
        },
        line: 71
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 72,
            column: 20
          },
          end: {
            line: 72,
            column: 21
          }
        },
        loc: {
          start: {
            line: 72,
            column: 32
          },
          end: {
            line: 80,
            column: 5
          }
        },
        line: 72
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 83,
            column: 28
          },
          end: {
            line: 83,
            column: 29
          }
        },
        loc: {
          start: {
            line: 83,
            column: 34
          },
          end: {
            line: 117,
            column: 3
          }
        },
        line: 83
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 84,
            column: 20
          },
          end: {
            line: 84,
            column: 21
          }
        },
        loc: {
          start: {
            line: 84,
            column: 32
          },
          end: {
            line: 116,
            column: 5
          }
        },
        line: 84
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 119,
            column: 30
          },
          end: {
            line: 119,
            column: 31
          }
        },
        loc: {
          start: {
            line: 119,
            column: 36
          },
          end: {
            line: 183,
            column: 3
          }
        },
        line: 119
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 120,
            column: 20
          },
          end: {
            line: 120,
            column: 21
          }
        },
        loc: {
          start: {
            line: 120,
            column: 32
          },
          end: {
            line: 182,
            column: 5
          }
        },
        line: 120
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 185,
            column: 47
          },
          end: {
            line: 185,
            column: 48
          }
        },
        loc: {
          start: {
            line: 185,
            column: 53
          },
          end: {
            line: 214,
            column: 3
          }
        },
        line: 185
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 186,
            column: 20
          },
          end: {
            line: 186,
            column: 21
          }
        },
        loc: {
          start: {
            line: 186,
            column: 32
          },
          end: {
            line: 213,
            column: 5
          }
        },
        line: 186
      },
      '15': {
        name: '(anonymous_15)',
        decl: {
          start: {
            line: 204,
            column: 23
          },
          end: {
            line: 204,
            column: 24
          }
        },
        loc: {
          start: {
            line: 204,
            column: 29
          },
          end: {
            line: 204,
            column: 49
          }
        },
        line: 204
      }
    },
    branchMap: {},
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0,
      '55': 0,
      '56': 0,
      '57': 0,
      '58': 0,
      '59': 0,
      '60': 0,
      '61': 0,
      '62': 0,
      '63': 0,
      '64': 0,
      '65': 0,
      '66': 0,
      '67': 0,
      '68': 0,
      '69': 0,
      '70': 0,
      '71': 0,
      '72': 0,
      '73': 0,
      '74': 0,
      '75': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0
    },
    b: {},
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _asyncToGenerator = _interopRequireDefault(require('async-to-generator'));

var _atom = require('atom');

var _UniversalDisposable;

function _load_UniversalDisposable() {
  return _UniversalDisposable = _interopRequireDefault(require('nuclide-commons/UniversalDisposable'));
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

cov_1cllkjyp0k.s[0]++;


describe('DefinitionHyperclick', () => {
  cov_1cllkjyp0k.f[0]++;

  let provider;
  const definitionProvider = (cov_1cllkjyp0k.s[1]++, {
    priority: 20,
    name: '',
    grammarScopes: ['text.plain.null-grammar'],
    getDefinition: () => {
      cov_1cllkjyp0k.f[1]++;
      cov_1cllkjyp0k.s[2]++;
      return Promise.resolve(null);
    }
  });
  let editor;
  const position = (cov_1cllkjyp0k.s[3]++, new _atom.Point(0, 0));
  let goToLocation;
  let disposables;

  cov_1cllkjyp0k.s[4]++;
  beforeEach(() => {
    cov_1cllkjyp0k.f[2]++;
    cov_1cllkjyp0k.s[5]++;

    atom.packages.activatePackage('atom-ide-definitions');
    cov_1cllkjyp0k.s[6]++;
    editor = new _atom.TextEditor();

    cov_1cllkjyp0k.s[7]++;
    goToLocation = spyOn(require('nuclide-commons-atom/go-to-location'), 'goToLocation');

    cov_1cllkjyp0k.s[8]++;
    disposables = new (_UniversalDisposable || _load_UniversalDisposable()).default(atom.packages.serviceHub.provide('definitions', '0.1.0', definitionProvider), atom.packages.serviceHub.consume('hyperclick', '0.1.0', x => {
      cov_1cllkjyp0k.f[3]++;
      cov_1cllkjyp0k.s[9]++;

      provider = x;
    }));
  });

  cov_1cllkjyp0k.s[10]++;
  afterEach(() => {
    cov_1cllkjyp0k.f[4]++;
    cov_1cllkjyp0k.s[11]++;

    disposables.dispose();
  });

  cov_1cllkjyp0k.s[12]++;
  it('no definition service', () => {
    cov_1cllkjyp0k.f[5]++;
    cov_1cllkjyp0k.s[13]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_1cllkjyp0k.f[6]++;
      cov_1cllkjyp0k.s[14]++;

      spyOn(editor, 'getGrammar').andReturn({ scopeName: 'blah' });
      cov_1cllkjyp0k.s[15]++;

      if (!(provider != null)) {
        throw new Error('Invariant violation: "provider != null"');
      }

      cov_1cllkjyp0k.s[16]++;

      if (!(provider.getSuggestion != null)) {
        throw new Error('Invariant violation: "provider.getSuggestion != null"');
      }

      const result = (cov_1cllkjyp0k.s[17]++, yield provider.getSuggestion(editor, position));
      cov_1cllkjyp0k.s[18]++;
      expect(result).toBe(null);
    }));
  });

  cov_1cllkjyp0k.s[19]++;
  it('no definition', () => {
    cov_1cllkjyp0k.f[7]++;
    cov_1cllkjyp0k.s[20]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_1cllkjyp0k.f[8]++;

      const spy = (cov_1cllkjyp0k.s[21]++, spyOn(definitionProvider, 'getDefinition').andReturn(null));
      cov_1cllkjyp0k.s[22]++;

      if (!(provider != null)) {
        throw new Error('Invariant violation: "provider != null"');
      }

      cov_1cllkjyp0k.s[23]++;

      if (!(provider.getSuggestion != null)) {
        throw new Error('Invariant violation: "provider.getSuggestion != null"');
      }

      const result = (cov_1cllkjyp0k.s[24]++, yield provider.getSuggestion(editor, position));

      cov_1cllkjyp0k.s[25]++;
      expect(result).toBe(null);
      cov_1cllkjyp0k.s[26]++;
      expect(spy).toHaveBeenCalledWith(editor, position);
    }));
  });

  cov_1cllkjyp0k.s[27]++;
  it('definition - single', () => {
    cov_1cllkjyp0k.f[9]++;
    cov_1cllkjyp0k.s[28]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_1cllkjyp0k.f[10]++;

      const definition = (cov_1cllkjyp0k.s[29]++, {
        queryRange: [new _atom.Range(new _atom.Point(1, 1), new _atom.Point(1, 5))],
        definitions: [{
          path: 'path1',
          position: new _atom.Point(1, 2),
          range: null,
          id: 'symbol-name',
          name: null,
          projectRoot: null
        }]
      });
      const spy = (cov_1cllkjyp0k.s[30]++, spyOn(definitionProvider, 'getDefinition').andReturn(Promise.resolve(definition)));

      cov_1cllkjyp0k.s[31]++;

      if (!(provider != null)) {
        throw new Error('Invariant violation: "provider != null"');
      }

      cov_1cllkjyp0k.s[32]++;

      if (!(provider.getSuggestion != null)) {
        throw new Error('Invariant violation: "provider.getSuggestion != null"');
      }

      const result = (cov_1cllkjyp0k.s[33]++, yield provider.getSuggestion(editor, position));

      cov_1cllkjyp0k.s[34]++;

      if (!(result != null)) {
        throw new Error('Invariant violation: "result != null"');
      }

      cov_1cllkjyp0k.s[35]++;

      expect(result.range).toEqual(definition.queryRange);
      cov_1cllkjyp0k.s[36]++;
      expect(spy).toHaveBeenCalledWith(editor, position);
      cov_1cllkjyp0k.s[37]++;
      expect(goToLocation).not.toHaveBeenCalled();

      cov_1cllkjyp0k.s[38]++;

      if (!(result != null)) {
        throw new Error('Invariant violation: "result != null"');
      }

      cov_1cllkjyp0k.s[39]++;

      if (!(result.callback != null)) {
        throw new Error('Invariant violation: "result.callback != null"');
      }

      cov_1cllkjyp0k.s[40]++;

      if (!(typeof result.callback === 'function')) {
        throw new Error('Invariant violation: "typeof result.callback === \'function\'"');
      }

      cov_1cllkjyp0k.s[41]++;

      result.callback();
      cov_1cllkjyp0k.s[42]++;
      expect(goToLocation).toHaveBeenCalledWith('path1', { line: 1, column: 2 });
    }));
  });

  cov_1cllkjyp0k.s[43]++;
  it('definition - multiple', () => {
    cov_1cllkjyp0k.f[11]++;
    cov_1cllkjyp0k.s[44]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_1cllkjyp0k.f[12]++;

      const defs = (cov_1cllkjyp0k.s[45]++, {
        queryRange: [new _atom.Range(new _atom.Point(1, 1), new _atom.Point(1, 5))],
        definitions: [{
          path: '/a/b/path1',
          position: new _atom.Point(1, 2),
          range: null,
          id: 'symbol-name',
          name: 'd1',
          projectRoot: '/a'
        }, {
          path: '/a/b/path2',
          position: new _atom.Point(3, 4),
          range: null,
          id: 'symbol-name2',
          name: 'd2',
          projectRoot: '/a'
        }, {
          path: '/a/b/path3',
          position: new _atom.Point(3, 4),
          range: null,
          id: 'symbol-without-name',
          projectRoot: '/a'
        }]
      });
      const spy = (cov_1cllkjyp0k.s[46]++, spyOn(definitionProvider, 'getDefinition').andReturn(Promise.resolve(defs)));

      cov_1cllkjyp0k.s[47]++;

      if (!(provider != null)) {
        throw new Error('Invariant violation: "provider != null"');
      }

      cov_1cllkjyp0k.s[48]++;

      if (!(provider.getSuggestion != null)) {
        throw new Error('Invariant violation: "provider.getSuggestion != null"');
      }

      const result = (cov_1cllkjyp0k.s[49]++, yield provider.getSuggestion(editor, position));

      cov_1cllkjyp0k.s[50]++;

      if (!(result != null)) {
        throw new Error('Invariant violation: "result != null"');
      }

      cov_1cllkjyp0k.s[51]++;

      expect(result.range).toEqual(defs.queryRange);
      cov_1cllkjyp0k.s[52]++;
      expect(spy).toHaveBeenCalledWith(editor, position);
      cov_1cllkjyp0k.s[53]++;
      expect(goToLocation).not.toHaveBeenCalled();
      const callbacks = (cov_1cllkjyp0k.s[54]++, result.callback);

      cov_1cllkjyp0k.s[55]++;
      expect(callbacks.length).toBe(3);
      cov_1cllkjyp0k.s[56]++;
      expect(callbacks[0].title).toBe('d1 (b/path1)');
      cov_1cllkjyp0k.s[57]++;
      expect(typeof callbacks[0].callback).toBe('function');
      cov_1cllkjyp0k.s[58]++;
      expect(callbacks[1].title).toBe('d2 (b/path2)');
      cov_1cllkjyp0k.s[59]++;
      expect(typeof callbacks[1].callback).toBe('function');
      cov_1cllkjyp0k.s[60]++;
      expect(callbacks[2].title).toBe('b/path3:4');
      cov_1cllkjyp0k.s[61]++;
      expect(typeof callbacks[2].callback).toBe('function');

      cov_1cllkjyp0k.s[62]++;
      callbacks[1].callback();
      cov_1cllkjyp0k.s[63]++;
      expect(goToLocation).toHaveBeenCalledWith('/a/b/path2', {
        line: 3,
        column: 4
      });
    }));
  });

  cov_1cllkjyp0k.s[64]++;
  it('falls back to lower-priority providers', () => {
    cov_1cllkjyp0k.f[13]++;
    cov_1cllkjyp0k.s[65]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_1cllkjyp0k.f[14]++;

      const def = (cov_1cllkjyp0k.s[66]++, {
        queryRange: [new _atom.Range(new _atom.Point(1, 1), new _atom.Point(1, 5))],
        definitions: [{
          path: 'path1',
          position: new _atom.Point(1, 2),
          range: null,
          id: 'symbol-name',
          name: null,
          projectRoot: null
        }]
      });
      const newProvider = (cov_1cllkjyp0k.s[67]++, {
        priority: 10,
        name: '',
        grammarScopes: ['text.plain.null-grammar'],
        getDefinition: function () {
          cov_1cllkjyp0k.f[15]++;
          cov_1cllkjyp0k.s[68]++;
          return Promise.resolve(def);
        }
      });
      cov_1cllkjyp0k.s[69]++;
      atom.packages.serviceHub.provide('definitions', '0.1.0', newProvider);
      cov_1cllkjyp0k.s[70]++;

      if (!(provider != null)) {
        throw new Error('Invariant violation: "provider != null"');
      }

      cov_1cllkjyp0k.s[71]++;

      if (!(provider.getSuggestion != null)) {
        throw new Error('Invariant violation: "provider.getSuggestion != null"');
      }

      const result = (cov_1cllkjyp0k.s[72]++, yield provider.getSuggestion(editor, position));
      cov_1cllkjyp0k.s[73]++;
      expect(result).not.toBe(null);
      cov_1cllkjyp0k.s[74]++;

      if (!(result != null)) {
        throw new Error('Invariant violation: "result != null"');
      }

      cov_1cllkjyp0k.s[75]++;

      expect(result.range).toEqual(def.queryRange);
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRlZmluaXRpb25IeXBlcmNsaWNrLXNwZWMuanMiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJwcm92aWRlciIsImRlZmluaXRpb25Qcm92aWRlciIsInByaW9yaXR5IiwibmFtZSIsImdyYW1tYXJTY29wZXMiLCJnZXREZWZpbml0aW9uIiwicmVzb2x2ZSIsImVkaXRvciIsInBvc2l0aW9uIiwiZ29Ub0xvY2F0aW9uIiwiZGlzcG9zYWJsZXMiLCJiZWZvcmVFYWNoIiwiYXRvbSIsInBhY2thZ2VzIiwiYWN0aXZhdGVQYWNrYWdlIiwic3B5T24iLCJyZXF1aXJlIiwic2VydmljZUh1YiIsInByb3ZpZGUiLCJjb25zdW1lIiwieCIsImFmdGVyRWFjaCIsImRpc3Bvc2UiLCJpdCIsIndhaXRzRm9yUHJvbWlzZSIsImFuZFJldHVybiIsInNjb3BlTmFtZSIsImdldFN1Z2dlc3Rpb24iLCJyZXN1bHQiLCJleHBlY3QiLCJ0b0JlIiwic3B5IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJkZWZpbml0aW9uIiwicXVlcnlSYW5nZSIsImRlZmluaXRpb25zIiwicGF0aCIsInJhbmdlIiwiaWQiLCJwcm9qZWN0Um9vdCIsIlByb21pc2UiLCJ0b0VxdWFsIiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsImNhbGxiYWNrIiwibGluZSIsImNvbHVtbiIsImRlZnMiLCJjYWxsYmFja3MiLCJsZW5ndGgiLCJ0aXRsZSIsImRlZiIsIm5ld1Byb3ZpZGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUFBO0FBQUE7O0FBQUE7O0FBQUEsWUFzQmhCQSxTQUFTMkIsYUFBVCxJQUEwQixJQXRCVjtBQUFBO0FBQUE7O0FBdUIxQixZQUFNQyxrQ0FBUyxNQUFNNUIsU0FBUzJCLGFBQVQsQ0FBdUJwQixNQUF2QixFQUErQkMsUUFBL0IsQ0FBZixDQUFOO0FBdkIwQjtBQXdCMUJxQixhQUFPRCxNQUFQLEVBQWVjLEdBQWYsQ0FBbUJaLElBQW5CLENBQXdCLElBQXhCO0FBeEIwQjs7QUFBQSxZQXlCaEJGLFVBQVUsSUF6Qk07QUFBQTtBQUFBOztBQUFBOztBQTBCMUJDLGFBQU9ELE9BQU9TLEtBQWQsRUFBcUJJLE9BQXJCLENBQTZCVSxJQUFJakIsVUFBakM7QUFDRCxLQTNCRDtBQTRCRCxHQTdCRDtBQThCRCxDQWhNRCIsImZpbGUiOiJEZWZpbml0aW9uSHlwZXJjbGljay1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1xuICBIeXBlcmNsaWNrUHJvdmlkZXIsXG4gIEh5cGVyY2xpY2tTdWdnZXN0aW9uLFxufSBmcm9tICcuLi8uLi9oeXBlcmNsaWNrL2xpYi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7RGVmaW5pdGlvblByb3ZpZGVyfSBmcm9tICcuLi9saWIvdHlwZXMnO1xuXG5pbXBvcnQge1BvaW50LCBSYW5nZSwgVGV4dEVkaXRvcn0gZnJvbSAnYXRvbSc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgVW5pdmVyc2FsRGlzcG9zYWJsZSBmcm9tICdudWNsaWRlLWNvbW1vbnMvVW5pdmVyc2FsRGlzcG9zYWJsZSc7XG5cbmRlc2NyaWJlKCdEZWZpbml0aW9uSHlwZXJjbGljaycsICgpID0+IHtcbiAgbGV0IHByb3ZpZGVyOiA/SHlwZXJjbGlja1Byb3ZpZGVyO1xuICBjb25zdCBkZWZpbml0aW9uUHJvdmlkZXI6IERlZmluaXRpb25Qcm92aWRlciA9IHtcbiAgICBwcmlvcml0eTogMjAsXG4gICAgbmFtZTogJycsXG4gICAgZ3JhbW1hclNjb3BlczogWyd0ZXh0LnBsYWluLm51bGwtZ3JhbW1hciddLFxuICAgIGdldERlZmluaXRpb246ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgfTtcbiAgbGV0IGVkaXRvcjogVGV4dEVkaXRvcjtcbiAgY29uc3QgcG9zaXRpb24gPSBuZXcgUG9pbnQoMCwgMCk7XG4gIGxldCBnb1RvTG9jYXRpb247XG4gIGxldCBkaXNwb3NhYmxlcztcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZSgnYXRvbS1pZGUtZGVmaW5pdGlvbnMnKTtcbiAgICBlZGl0b3IgPSBuZXcgVGV4dEVkaXRvcigpO1xuXG4gICAgZ29Ub0xvY2F0aW9uID0gc3B5T24oXG4gICAgICByZXF1aXJlKCdudWNsaWRlLWNvbW1vbnMtYXRvbS9nby10by1sb2NhdGlvbicpLFxuICAgICAgJ2dvVG9Mb2NhdGlvbicsXG4gICAgKTtcblxuICAgIGRpc3Bvc2FibGVzID0gbmV3IFVuaXZlcnNhbERpc3Bvc2FibGUoXG4gICAgICBhdG9tLnBhY2thZ2VzLnNlcnZpY2VIdWIucHJvdmlkZShcbiAgICAgICAgJ2RlZmluaXRpb25zJyxcbiAgICAgICAgJzAuMS4wJyxcbiAgICAgICAgZGVmaW5pdGlvblByb3ZpZGVyLFxuICAgICAgKSxcbiAgICAgIGF0b20ucGFja2FnZXMuc2VydmljZUh1Yi5jb25zdW1lKCdoeXBlcmNsaWNrJywgJzAuMS4wJywgeCA9PiB7XG4gICAgICAgIHByb3ZpZGVyID0geDtcbiAgICAgIH0pLFxuICAgICk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgZGlzcG9zYWJsZXMuZGlzcG9zZSgpO1xuICB9KTtcblxuICBpdCgnbm8gZGVmaW5pdGlvbiBzZXJ2aWNlJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZShhc3luYyAoKSA9PiB7XG4gICAgICBzcHlPbihlZGl0b3IsICdnZXRHcmFtbWFyJykuYW5kUmV0dXJuKHtzY29wZU5hbWU6ICdibGFoJ30pO1xuICAgICAgaW52YXJpYW50KHByb3ZpZGVyICE9IG51bGwpO1xuICAgICAgaW52YXJpYW50KHByb3ZpZGVyLmdldFN1Z2dlc3Rpb24gIT0gbnVsbCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm92aWRlci5nZXRTdWdnZXN0aW9uKGVkaXRvciwgcG9zaXRpb24pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShudWxsKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ25vIGRlZmluaXRpb24nLCAoKSA9PiB7XG4gICAgd2FpdHNGb3JQcm9taXNlKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNweSA9IHNweU9uKGRlZmluaXRpb25Qcm92aWRlciwgJ2dldERlZmluaXRpb24nKS5hbmRSZXR1cm4obnVsbCk7XG4gICAgICBpbnZhcmlhbnQocHJvdmlkZXIgIT0gbnVsbCk7XG4gICAgICBpbnZhcmlhbnQocHJvdmlkZXIuZ2V0U3VnZ2VzdGlvbiAhPSBudWxsKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb3ZpZGVyLmdldFN1Z2dlc3Rpb24oZWRpdG9yLCBwb3NpdGlvbik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUobnVsbCk7XG4gICAgICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChlZGl0b3IsIHBvc2l0aW9uKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ2RlZmluaXRpb24gLSBzaW5nbGUnLCAoKSA9PiB7XG4gICAgd2FpdHNGb3JQcm9taXNlKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRlZmluaXRpb24gPSB7XG4gICAgICAgIHF1ZXJ5UmFuZ2U6IFtuZXcgUmFuZ2UobmV3IFBvaW50KDEsIDEpLCBuZXcgUG9pbnQoMSwgNSkpXSxcbiAgICAgICAgZGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwYXRoOiAncGF0aDEnLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBQb2ludCgxLCAyKSxcbiAgICAgICAgICAgIHJhbmdlOiBudWxsLFxuICAgICAgICAgICAgaWQ6ICdzeW1ib2wtbmFtZScsXG4gICAgICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICAgICAgcHJvamVjdFJvb3Q6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgICBjb25zdCBzcHkgPSBzcHlPbihkZWZpbml0aW9uUHJvdmlkZXIsICdnZXREZWZpbml0aW9uJykuYW5kUmV0dXJuKFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoZGVmaW5pdGlvbiksXG4gICAgICApO1xuXG4gICAgICBpbnZhcmlhbnQocHJvdmlkZXIgIT0gbnVsbCk7XG4gICAgICBpbnZhcmlhbnQocHJvdmlkZXIuZ2V0U3VnZ2VzdGlvbiAhPSBudWxsKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb3ZpZGVyLmdldFN1Z2dlc3Rpb24oZWRpdG9yLCBwb3NpdGlvbik7XG5cbiAgICAgIGludmFyaWFudChyZXN1bHQgIT0gbnVsbCk7XG4gICAgICBleHBlY3QocmVzdWx0LnJhbmdlKS50b0VxdWFsKGRlZmluaXRpb24ucXVlcnlSYW5nZSk7XG4gICAgICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChlZGl0b3IsIHBvc2l0aW9uKTtcbiAgICAgIGV4cGVjdChnb1RvTG9jYXRpb24pLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG5cbiAgICAgIGludmFyaWFudChyZXN1bHQgIT0gbnVsbCk7XG4gICAgICBpbnZhcmlhbnQocmVzdWx0LmNhbGxiYWNrICE9IG51bGwpO1xuICAgICAgaW52YXJpYW50KHR5cGVvZiByZXN1bHQuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpO1xuICAgICAgcmVzdWx0LmNhbGxiYWNrKCk7XG4gICAgICBleHBlY3QoZ29Ub0xvY2F0aW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncGF0aDEnLCB7bGluZTogMSwgY29sdW1uOiAyfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdkZWZpbml0aW9uIC0gbXVsdGlwbGUnLCAoKSA9PiB7XG4gICAgd2FpdHNGb3JQcm9taXNlKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRlZnMgPSB7XG4gICAgICAgIHF1ZXJ5UmFuZ2U6IFtuZXcgUmFuZ2UobmV3IFBvaW50KDEsIDEpLCBuZXcgUG9pbnQoMSwgNSkpXSxcbiAgICAgICAgZGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwYXRoOiAnL2EvYi9wYXRoMScsXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IFBvaW50KDEsIDIpLFxuICAgICAgICAgICAgcmFuZ2U6IG51bGwsXG4gICAgICAgICAgICBpZDogJ3N5bWJvbC1uYW1lJyxcbiAgICAgICAgICAgIG5hbWU6ICdkMScsXG4gICAgICAgICAgICBwcm9qZWN0Um9vdDogJy9hJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHBhdGg6ICcvYS9iL3BhdGgyJyxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgUG9pbnQoMywgNCksXG4gICAgICAgICAgICByYW5nZTogbnVsbCxcbiAgICAgICAgICAgIGlkOiAnc3ltYm9sLW5hbWUyJyxcbiAgICAgICAgICAgIG5hbWU6ICdkMicsXG4gICAgICAgICAgICBwcm9qZWN0Um9vdDogJy9hJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHBhdGg6ICcvYS9iL3BhdGgzJyxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgUG9pbnQoMywgNCksXG4gICAgICAgICAgICByYW5nZTogbnVsbCxcbiAgICAgICAgICAgIGlkOiAnc3ltYm9sLXdpdGhvdXQtbmFtZScsXG4gICAgICAgICAgICBwcm9qZWN0Um9vdDogJy9hJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHNweSA9IHNweU9uKGRlZmluaXRpb25Qcm92aWRlciwgJ2dldERlZmluaXRpb24nKS5hbmRSZXR1cm4oXG4gICAgICAgIFByb21pc2UucmVzb2x2ZShkZWZzKSxcbiAgICAgICk7XG5cbiAgICAgIGludmFyaWFudChwcm92aWRlciAhPSBudWxsKTtcbiAgICAgIGludmFyaWFudChwcm92aWRlci5nZXRTdWdnZXN0aW9uICE9IG51bGwpO1xuICAgICAgY29uc3QgcmVzdWx0OiA/SHlwZXJjbGlja1N1Z2dlc3Rpb24gPSBhd2FpdCBwcm92aWRlci5nZXRTdWdnZXN0aW9uKFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgKTtcblxuICAgICAgaW52YXJpYW50KHJlc3VsdCAhPSBudWxsKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmFuZ2UpLnRvRXF1YWwoZGVmcy5xdWVyeVJhbmdlKTtcbiAgICAgIGV4cGVjdChzcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGVkaXRvciwgcG9zaXRpb24pO1xuICAgICAgZXhwZWN0KGdvVG9Mb2NhdGlvbikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGNvbnN0IGNhbGxiYWNrczogQXJyYXk8e1xuICAgICAgICB0aXRsZTogc3RyaW5nLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4gbWl4ZWQsXG4gICAgICB9PiA9IChyZXN1bHQuY2FsbGJhY2s6IGFueSk7XG5cbiAgICAgIGV4cGVjdChjYWxsYmFja3MubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgZXhwZWN0KGNhbGxiYWNrc1swXS50aXRsZSkudG9CZSgnZDEgKGIvcGF0aDEpJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGNhbGxiYWNrc1swXS5jYWxsYmFjaykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdChjYWxsYmFja3NbMV0udGl0bGUpLnRvQmUoJ2QyIChiL3BhdGgyKScpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBjYWxsYmFja3NbMV0uY2FsbGJhY2spLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QoY2FsbGJhY2tzWzJdLnRpdGxlKS50b0JlKCdiL3BhdGgzOjQnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgY2FsbGJhY2tzWzJdLmNhbGxiYWNrKS50b0JlKCdmdW5jdGlvbicpO1xuXG4gICAgICBjYWxsYmFja3NbMV0uY2FsbGJhY2soKTtcbiAgICAgIGV4cGVjdChnb1RvTG9jYXRpb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYS9iL3BhdGgyJywge1xuICAgICAgICBsaW5lOiAzLFxuICAgICAgICBjb2x1bW46IDQsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ2ZhbGxzIGJhY2sgdG8gbG93ZXItcHJpb3JpdHkgcHJvdmlkZXJzJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZShhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkZWYgPSB7XG4gICAgICAgIHF1ZXJ5UmFuZ2U6IFtuZXcgUmFuZ2UobmV3IFBvaW50KDEsIDEpLCBuZXcgUG9pbnQoMSwgNSkpXSxcbiAgICAgICAgZGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwYXRoOiAncGF0aDEnLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBQb2ludCgxLCAyKSxcbiAgICAgICAgICAgIHJhbmdlOiBudWxsLFxuICAgICAgICAgICAgaWQ6ICdzeW1ib2wtbmFtZScsXG4gICAgICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICAgICAgcHJvamVjdFJvb3Q6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgICBjb25zdCBuZXdQcm92aWRlciA9IHtcbiAgICAgICAgcHJpb3JpdHk6IDEwLFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgZ3JhbW1hclNjb3BlczogWyd0ZXh0LnBsYWluLm51bGwtZ3JhbW1hciddLFxuICAgICAgICBnZXREZWZpbml0aW9uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoZGVmKSxcbiAgICAgIH07XG4gICAgICBhdG9tLnBhY2thZ2VzLnNlcnZpY2VIdWIucHJvdmlkZSgnZGVmaW5pdGlvbnMnLCAnMC4xLjAnLCBuZXdQcm92aWRlcik7XG4gICAgICBpbnZhcmlhbnQocHJvdmlkZXIgIT0gbnVsbCk7XG4gICAgICBpbnZhcmlhbnQocHJvdmlkZXIuZ2V0U3VnZ2VzdGlvbiAhPSBudWxsKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb3ZpZGVyLmdldFN1Z2dlc3Rpb24oZWRpdG9yLCBwb3NpdGlvbik7XG4gICAgICBleHBlY3QocmVzdWx0KS5ub3QudG9CZShudWxsKTtcbiAgICAgIGludmFyaWFudChyZXN1bHQgIT0gbnVsbCk7XG4gICAgICBleHBlY3QocmVzdWx0LnJhbmdlKS50b0VxdWFsKGRlZi5xdWVyeVJhbmdlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==