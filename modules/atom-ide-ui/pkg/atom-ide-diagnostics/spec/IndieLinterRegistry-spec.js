'use strict';

var cov_z2opoxhup = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics/spec/IndieLinterRegistry-spec.js',
      hash = '4c5df917feec6e4fc8e9bcb21f92d7616faa82fd',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics/spec/IndieLinterRegistry-spec.js',
    statementMap: {
      '0': {
        start: {
          line: 15,
          column: 0
        },
        end: {
          line: 86,
          column: 3
        }
      },
      '1': {
        start: {
          line: 16,
          column: 19
        },
        end: {
          line: 16,
          column: 44
        }
      },
      '2': {
        start: {
          line: 17,
          column: 19
        },
        end: {
          line: 24,
          column: 3
        }
      },
      '3': {
        start: {
          line: 25,
          column: 19
        },
        end: {
          line: 32,
          column: 3
        }
      },
      '4': {
        start: {
          line: 35,
          column: 2
        },
        end: {
          line: 37,
          column: 5
        }
      },
      '5': {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 36,
          column: 49
        }
      },
      '6': {
        start: {
          line: 39,
          column: 2
        },
        end: {
          line: 42,
          column: 5
        }
      },
      '7': {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 40,
          column: 23
        }
      },
      '8': {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 41,
          column: 45
        }
      },
      '9': {
        start: {
          line: 44,
          column: 2
        },
        end: {
          line: 85,
          column: 5
        }
      },
      '10': {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 47,
          column: 7
        }
      },
      '11': {
        start: {
          line: 46,
          column: 6
        },
        end: {
          line: 46,
          column: 41
        }
      },
      '12': {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 68,
          column: 7
        }
      },
      '13': {
        start: {
          line: 50,
          column: 6
        },
        end: {
          line: 50,
          column: 49
        }
      },
      '14': {
        start: {
          line: 52,
          column: 6
        },
        end: {
          line: 52,
          column: 51
        }
      },
      '15': {
        start: {
          line: 53,
          column: 6
        },
        end: {
          line: 53,
          column: 57
        }
      },
      '16': {
        start: {
          line: 56,
          column: 6
        },
        end: {
          line: 56,
          column: 51
        }
      },
      '17': {
        start: {
          line: 57,
          column: 6
        },
        end: {
          line: 57,
          column: 57
        }
      },
      '18': {
        start: {
          line: 60,
          column: 6
        },
        end: {
          line: 60,
          column: 52
        }
      },
      '19': {
        start: {
          line: 61,
          column: 6
        },
        end: {
          line: 61,
          column: 67
        }
      },
      '20': {
        start: {
          line: 63,
          column: 6
        },
        end: {
          line: 63,
          column: 42
        }
      },
      '21': {
        start: {
          line: 64,
          column: 6
        },
        end: {
          line: 64,
          column: 57
        }
      },
      '22': {
        start: {
          line: 66,
          column: 6
        },
        end: {
          line: 66,
          column: 31
        }
      },
      '23': {
        start: {
          line: 67,
          column: 6
        },
        end: {
          line: 67,
          column: 49
        }
      },
      '24': {
        start: {
          line: 70,
          column: 4
        },
        end: {
          line: 75,
          column: 7
        }
      },
      '25': {
        start: {
          line: 71,
          column: 18
        },
        end: {
          line: 71,
          column: 37
        }
      },
      '26': {
        start: {
          line: 72,
          column: 6
        },
        end: {
          line: 72,
          column: 32
        }
      },
      '27': {
        start: {
          line: 73,
          column: 6
        },
        end: {
          line: 73,
          column: 51
        }
      },
      '28': {
        start: {
          line: 74,
          column: 6
        },
        end: {
          line: 74,
          column: 51
        }
      },
      '29': {
        start: {
          line: 77,
          column: 4
        },
        end: {
          line: 84,
          column: 7
        }
      },
      '30': {
        start: {
          line: 78,
          column: 18
        },
        end: {
          line: 78,
          column: 37
        }
      },
      '31': {
        start: {
          line: 79,
          column: 6
        },
        end: {
          line: 79,
          column: 33
        }
      },
      '32': {
        start: {
          line: 80,
          column: 6
        },
        end: {
          line: 80,
          column: 36
        }
      },
      '33': {
        start: {
          line: 81,
          column: 6
        },
        end: {
          line: 81,
          column: 25
        }
      },
      '34': {
        start: {
          line: 82,
          column: 6
        },
        end: {
          line: 82,
          column: 25
        }
      },
      '35': {
        start: {
          line: 83,
          column: 6
        },
        end: {
          line: 83,
          column: 36
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 15,
            column: 32
          },
          end: {
            line: 15,
            column: 33
          }
        },
        loc: {
          start: {
            line: 15,
            column: 38
          },
          end: {
            line: 86,
            column: 1
          }
        },
        line: 15
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 35,
            column: 13
          },
          end: {
            line: 35,
            column: 14
          }
        },
        loc: {
          start: {
            line: 35,
            column: 19
          },
          end: {
            line: 37,
            column: 3
          }
        },
        line: 35
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 39,
            column: 12
          },
          end: {
            line: 39,
            column: 13
          }
        },
        loc: {
          start: {
            line: 39,
            column: 18
          },
          end: {
            line: 42,
            column: 3
          }
        },
        line: 39
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 44,
            column: 34
          },
          end: {
            line: 44,
            column: 35
          }
        },
        loc: {
          start: {
            line: 44,
            column: 40
          },
          end: {
            line: 85,
            column: 3
          }
        },
        line: 44
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 45,
            column: 21
          },
          end: {
            line: 45,
            column: 22
          }
        },
        loc: {
          start: {
            line: 45,
            column: 27
          },
          end: {
            line: 47,
            column: 5
          }
        },
        line: 45
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 49,
            column: 32
          },
          end: {
            line: 49,
            column: 33
          }
        },
        loc: {
          start: {
            line: 49,
            column: 38
          },
          end: {
            line: 68,
            column: 5
          }
        },
        line: 49
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 70,
            column: 31
          },
          end: {
            line: 70,
            column: 32
          }
        },
        loc: {
          start: {
            line: 70,
            column: 37
          },
          end: {
            line: 75,
            column: 5
          }
        },
        line: 70
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 77,
            column: 32
          },
          end: {
            line: 77,
            column: 33
          }
        },
        loc: {
          start: {
            line: 77,
            column: 38
          },
          end: {
            line: 84,
            column: 5
          }
        },
        line: 77
      }
    },
    branchMap: {},
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0
    },
    b: {},
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _IndieLinterRegistry;

function _load_IndieLinterRegistry() {
  return _IndieLinterRegistry = _interopRequireDefault(require('../lib/services/IndieLinterRegistry'));
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

cov_z2opoxhup.s[0]++; /**
                       * Copyright (c) 2017-present, Facebook, Inc.
                       * All rights reserved.
                       *
                       * This source code is licensed under the BSD-style license found in the
                       * LICENSE file in the root directory of this source tree. An additional grant
                       * of patent rights can be found in the PATENTS file in the same directory.
                       *
                       * 
                       * @format
                       */

describe('IndieLinterRegistry', () => {
  cov_z2opoxhup.f[0]++;

  const registry = (cov_z2opoxhup.s[1]++, new (_IndieLinterRegistry || _load_IndieLinterRegistry()).default());
  const message1 = (cov_z2opoxhup.s[2]++, {
    location: {
      file: 'test.txt',
      position: [[0, 0], [0, 0]]
    },
    excerpt: 'test',
    severity: 'error'
  });
  const message2 = (cov_z2opoxhup.s[3]++, {
    location: {
      file: 'test2.txt',
      position: [[0, 0], [0, 0]]
    },
    excerpt: 'test2',
    severity: 'error'
  });

  let delegate;
  cov_z2opoxhup.s[4]++;
  beforeEach(() => {
    cov_z2opoxhup.f[1]++;
    cov_z2opoxhup.s[5]++;

    delegate = registry.register({ name: 'test' });
  });

  cov_z2opoxhup.s[6]++;
  afterEach(() => {
    cov_z2opoxhup.f[2]++;
    cov_z2opoxhup.s[7]++;

    delegate.dispose();
    cov_z2opoxhup.s[8]++;
    expect(registry._delegates.size).toBe(0);
  });

  cov_z2opoxhup.s[9]++;
  describe('IndieLinterDelegate', () => {
    cov_z2opoxhup.f[3]++;
    cov_z2opoxhup.s[10]++;

    it('has a name', () => {
      cov_z2opoxhup.f[4]++;
      cov_z2opoxhup.s[11]++;

      expect(delegate.name).toBe('test');
    });

    cov_z2opoxhup.s[12]++;
    it('supports message APIs', () => {
      cov_z2opoxhup.f[5]++;
      cov_z2opoxhup.s[13]++;

      expect(delegate.getMessages()).toEqual([]);

      cov_z2opoxhup.s[14]++;
      delegate.setMessages('test.txt', [message1]);
      cov_z2opoxhup.s[15]++;
      expect(delegate.getMessages()).toEqual([message1]);

      // Replaces the previous message.
      cov_z2opoxhup.s[16]++;
      delegate.setMessages('test.txt', [message1]);
      cov_z2opoxhup.s[17]++;
      expect(delegate.getMessages()).toEqual([message1]);

      // Doesn't affect existing files.
      cov_z2opoxhup.s[18]++;
      delegate.setMessages('test2.txt', [message2]);
      cov_z2opoxhup.s[19]++;
      expect(delegate.getMessages()).toEqual([message1, message2]);

      cov_z2opoxhup.s[20]++;
      delegate.setAllMessages([message1]);
      cov_z2opoxhup.s[21]++;
      expect(delegate.getMessages()).toEqual([message1]);

      cov_z2opoxhup.s[22]++;
      delegate.clearMessages();
      cov_z2opoxhup.s[23]++;
      expect(delegate.getMessages()).toEqual([]);
    });

    cov_z2opoxhup.s[24]++;
    it('supports onDidChange', () => {
      cov_z2opoxhup.f[6]++;

      const spy = (cov_z2opoxhup.s[25]++, jasmine.createSpy());
      cov_z2opoxhup.s[26]++;
      delegate.onDidUpdate(spy);
      cov_z2opoxhup.s[27]++;
      delegate.setMessages('test.txt', [message1]);
      cov_z2opoxhup.s[28]++;
      expect(spy).toHaveBeenCalledWith([message1]);
    });

    cov_z2opoxhup.s[29]++;
    it('supports onDidDestroy', () => {
      cov_z2opoxhup.f[7]++;

      const spy = (cov_z2opoxhup.s[30]++, jasmine.createSpy());
      cov_z2opoxhup.s[31]++;
      delegate.onDidDestroy(spy);
      cov_z2opoxhup.s[32]++;
      expect(spy.callCount).toBe(0);
      cov_z2opoxhup.s[33]++;
      delegate.dispose();
      cov_z2opoxhup.s[34]++;
      delegate.dispose();
      cov_z2opoxhup.s[35]++;
      expect(spy.callCount).toBe(1);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkluZGllTGludGVyUmVnaXN0cnktc3BlYy5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsInJlZ2lzdHJ5IiwibWVzc2FnZTEiLCJsb2NhdGlvbiIsImZpbGUiLCJwb3NpdGlvbiIsImV4Y2VycHQiLCJzZXZlcml0eSIsIm1lc3NhZ2UyIiwiZGVsZWdhdGUiLCJiZWZvcmVFYWNoIiwicmVnaXN0ZXIiLCJuYW1lIiwiYWZ0ZXJFYWNoIiwiZGlzcG9zZSIsImV4cGVjdCIsIl9kZWxlZ2F0ZXMiLCJzaXplIiwidG9CZSIsIml0IiwiZ2V0TWVzc2FnZXMiLCJ0b0VxdWFsIiwic2V0TWVzc2FnZXMiLCJzZXRBbGxNZXNzYWdlcyIsImNsZWFyTWVzc2FnZXMiLCJzcHkiLCJqYXNtaW5lIiwiY3JlYXRlU3B5Iiwib25EaWRVcGRhdGUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9uRGlkRGVzdHJveSIsImNhbGxDb3VudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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TUMsUUFBUUMsU0FBUixFQUFOLENBQU47QUFEK0I7QUFFL0JsQixlQUFTbUIsV0FBVCxDQUFxQkgsR0FBckI7QUFGK0I7QUFHL0JoQixlQUFTYSxXQUFULENBQXFCLFVBQXJCLEVBQWlDLENBQUNwQixRQUFELENBQWpDO0FBSCtCO0FBSS9CYSxhQUFPVSxHQUFQLEVBQVlJLG9CQUFaLENBQWlDLENBQUMzQixRQUFELENBQWpDO0FBQ0QsS0FMRDs7QUExQm9DO0FBaUNwQ2lCLE9BQUcsdUJBQUgsRUFBNEIsTUFBTTtBQUFBOztBQUNoQyxZQUFNTSw4QkFBTUMsUUFBUUMsU0FBUixFQUFOLENBQU47QUFEZ0M7QUFFaENsQixlQUFTcUIsWUFBVCxDQUFzQkwsR0FBdEI7QUFGZ0M7QUFHaENWLGFBQU9VLElBQUlNLFNBQVgsRUFBc0JiLElBQXRCLENBQTJCLENBQTNCO0FBSGdDO0FBSWhDVCxlQUFTSyxPQUFUO0FBSmdDO0FBS2hDTCxlQUFTSyxPQUFUO0FBTGdDO0FBTWhDQyxhQUFPVSxJQUFJTSxTQUFYLEVBQXNCYixJQUF0QixDQUEyQixDQUEzQjtBQUNELEtBUEQ7QUFRRCxHQXpDRDtBQTBDRCxDQXZFRCIsImZpbGUiOiJJbmRpZUxpbnRlclJlZ2lzdHJ5LXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgSW5kaWVMaW50ZXJSZWdpc3RyeSBmcm9tICcuLi9saWIvc2VydmljZXMvSW5kaWVMaW50ZXJSZWdpc3RyeSc7XG5cbmRlc2NyaWJlKCdJbmRpZUxpbnRlclJlZ2lzdHJ5JywgKCkgPT4ge1xuICBjb25zdCByZWdpc3RyeSA9IG5ldyBJbmRpZUxpbnRlclJlZ2lzdHJ5KCk7XG4gIGNvbnN0IG1lc3NhZ2UxID0ge1xuICAgIGxvY2F0aW9uOiB7XG4gICAgICBmaWxlOiAndGVzdC50eHQnLFxuICAgICAgcG9zaXRpb246IFtbMCwgMF0sIFswLCAwXV0sXG4gICAgfSxcbiAgICBleGNlcnB0OiAndGVzdCcsXG4gICAgc2V2ZXJpdHk6ICdlcnJvcicsXG4gIH07XG4gIGNvbnN0IG1lc3NhZ2UyID0ge1xuICAgIGxvY2F0aW9uOiB7XG4gICAgICBmaWxlOiAndGVzdDIudHh0JyxcbiAgICAgIHBvc2l0aW9uOiBbWzAsIDBdLCBbMCwgMF1dLFxuICAgIH0sXG4gICAgZXhjZXJwdDogJ3Rlc3QyJyxcbiAgICBzZXZlcml0eTogJ2Vycm9yJyxcbiAgfTtcblxuICBsZXQgZGVsZWdhdGU7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGRlbGVnYXRlID0gcmVnaXN0cnkucmVnaXN0ZXIoe25hbWU6ICd0ZXN0J30pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGRlbGVnYXRlLmRpc3Bvc2UoKTtcbiAgICBleHBlY3QocmVnaXN0cnkuX2RlbGVnYXRlcy5zaXplKS50b0JlKDApO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW5kaWVMaW50ZXJEZWxlZ2F0ZScsICgpID0+IHtcbiAgICBpdCgnaGFzIGEgbmFtZScsICgpID0+IHtcbiAgICAgIGV4cGVjdChkZWxlZ2F0ZS5uYW1lKS50b0JlKCd0ZXN0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc3VwcG9ydHMgbWVzc2FnZSBBUElzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGRlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW10pO1xuXG4gICAgICBkZWxlZ2F0ZS5zZXRNZXNzYWdlcygndGVzdC50eHQnLCBbbWVzc2FnZTFdKTtcbiAgICAgIGV4cGVjdChkZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFttZXNzYWdlMV0pO1xuXG4gICAgICAvLyBSZXBsYWNlcyB0aGUgcHJldmlvdXMgbWVzc2FnZS5cbiAgICAgIGRlbGVnYXRlLnNldE1lc3NhZ2VzKCd0ZXN0LnR4dCcsIFttZXNzYWdlMV0pO1xuICAgICAgZXhwZWN0KGRlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW21lc3NhZ2UxXSk7XG5cbiAgICAgIC8vIERvZXNuJ3QgYWZmZWN0IGV4aXN0aW5nIGZpbGVzLlxuICAgICAgZGVsZWdhdGUuc2V0TWVzc2FnZXMoJ3Rlc3QyLnR4dCcsIFttZXNzYWdlMl0pO1xuICAgICAgZXhwZWN0KGRlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW21lc3NhZ2UxLCBtZXNzYWdlMl0pO1xuXG4gICAgICBkZWxlZ2F0ZS5zZXRBbGxNZXNzYWdlcyhbbWVzc2FnZTFdKTtcbiAgICAgIGV4cGVjdChkZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFttZXNzYWdlMV0pO1xuXG4gICAgICBkZWxlZ2F0ZS5jbGVhck1lc3NhZ2VzKCk7XG4gICAgICBleHBlY3QoZGVsZWdhdGUuZ2V0TWVzc2FnZXMoKSkudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc3VwcG9ydHMgb25EaWRDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzcHkgPSBqYXNtaW5lLmNyZWF0ZVNweSgpO1xuICAgICAgZGVsZWdhdGUub25EaWRVcGRhdGUoc3B5KTtcbiAgICAgIGRlbGVnYXRlLnNldE1lc3NhZ2VzKCd0ZXN0LnR4dCcsIFttZXNzYWdlMV0pO1xuICAgICAgZXhwZWN0KHNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoW21lc3NhZ2UxXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc3VwcG9ydHMgb25EaWREZXN0cm95JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3B5ID0gamFzbWluZS5jcmVhdGVTcHkoKTtcbiAgICAgIGRlbGVnYXRlLm9uRGlkRGVzdHJveShzcHkpO1xuICAgICAgZXhwZWN0KHNweS5jYWxsQ291bnQpLnRvQmUoMCk7XG4gICAgICBkZWxlZ2F0ZS5kaXNwb3NlKCk7XG4gICAgICBkZWxlZ2F0ZS5kaXNwb3NlKCk7XG4gICAgICBleHBlY3Qoc3B5LmNhbGxDb3VudCkudG9CZSgxKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==