'use strict';

var cov_2iqct128cv = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-ui/spec/ClickOutsideBoundry-spec.js',
      hash = '7ce4ca7255aeab5051f68b1137598baab76d5fed',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-ui/spec/ClickOutsideBoundry-spec.js',
    statementMap: {
      '0': {
        start: {
          line: 18,
          column: 16
        },
        end: {
          line: 22,
          column: 1
        }
      },
      '1': {
        start: {
          line: 19,
          column: 15
        },
        end: {
          line: 19,
          column: 42
        }
      },
      '2': {
        start: {
          line: 20,
          column: 2
        },
        end: {
          line: 20,
          column: 69
        }
      },
      '3': {
        start: {
          line: 21,
          column: 2
        },
        end: {
          line: 21,
          column: 15
        }
      },
      '4': {
        start: {
          line: 28,
          column: 4
        },
        end: {
          line: 28,
          column: 17
        }
      },
      '5': {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 29,
          column: 33
        }
      },
      '6': {
        start: {
          line: 33,
          column: 4
        },
        end: {
          line: 33,
          column: 36
        }
      },
      '7': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 41,
          column: 13
        }
      },
      '8': {
        start: {
          line: 45,
          column: 0
        },
        end: {
          line: 132,
          column: 3
        }
      },
      '9': {
        start: {
          line: 49,
          column: 2
        },
        end: {
          line: 53,
          column: 5
        }
      },
      '10': {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 50,
          column: 40
        }
      },
      '11': {
        start: {
          line: 51,
          column: 4
        },
        end: {
          line: 51,
          column: 42
        }
      },
      '12': {
        start: {
          line: 52,
          column: 4
        },
        end: {
          line: 52,
          column: 57
        }
      },
      '13': {
        start: {
          line: 55,
          column: 2
        },
        end: {
          line: 57,
          column: 5
        }
      },
      '14': {
        start: {
          line: 56,
          column: 4
        },
        end: {
          line: 56,
          column: 42
        }
      },
      '15': {
        start: {
          line: 59,
          column: 2
        },
        end: {
          line: 102,
          column: 5
        }
      },
      '16': {
        start: {
          line: 60,
          column: 4
        },
        end: {
          line: 71,
          column: 7
        }
      },
      '17': {
        start: {
          line: 61,
          column: 6
        },
        end: {
          line: 68,
          column: 8
        }
      },
      '18': {
        start: {
          line: 69,
          column: 6
        },
        end: {
          line: 69,
          column: 27
        }
      },
      '19': {
        start: {
          line: 70,
          column: 6
        },
        end: {
          line: 70,
          column: 48
        }
      },
      '20': {
        start: {
          line: 73,
          column: 4
        },
        end: {
          line: 85,
          column: 7
        }
      },
      '21': {
        start: {
          line: 74,
          column: 6
        },
        end: {
          line: 82,
          column: 8
        }
      },
      '22': {
        start: {
          line: 83,
          column: 6
        },
        end: {
          line: 83,
          column: 25
        }
      },
      '23': {
        start: {
          line: 84,
          column: 6
        },
        end: {
          line: 84,
          column: 48
        }
      },
      '24': {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 101,
          column: 7
        }
      },
      '25': {
        start: {
          line: 90,
          column: 6
        },
        end: {
          line: 98,
          column: 8
        }
      },
      '26': {
        start: {
          line: 99,
          column: 6
        },
        end: {
          line: 99,
          column: 28
        }
      },
      '27': {
        start: {
          line: 100,
          column: 6
        },
        end: {
          line: 100,
          column: 48
        }
      },
      '28': {
        start: {
          line: 104,
          column: 2
        },
        end: {
          line: 131,
          column: 5
        }
      },
      '29': {
        start: {
          line: 105,
          column: 4
        },
        end: {
          line: 114,
          column: 7
        }
      },
      '30': {
        start: {
          line: 106,
          column: 6
        },
        end: {
          line: 111,
          column: 8
        }
      },
      '31': {
        start: {
          line: 112,
          column: 6
        },
        end: {
          line: 112,
          column: 24
        }
      },
      '32': {
        start: {
          line: 113,
          column: 6
        },
        end: {
          line: 113,
          column: 52
        }
      },
      '33': {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 130,
          column: 7
        }
      },
      '34': {
        start: {
          line: 118,
          column: 28
        },
        end: {
          line: 118,
          column: 62
        }
      },
      '35': {
        start: {
          line: 119,
          column: 6
        },
        end: {
          line: 126,
          column: 8
        }
      },
      '36': {
        start: {
          line: 127,
          column: 6
        },
        end: {
          line: 127,
          column: 28
        }
      },
      '37': {
        start: {
          line: 128,
          column: 6
        },
        end: {
          line: 128,
          column: 47
        }
      },
      '38': {
        start: {
          line: 129,
          column: 6
        },
        end: {
          line: 129,
          column: 52
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 18,
            column: 16
          },
          end: {
            line: 18,
            column: 17
          }
        },
        loc: {
          start: {
            line: 18,
            column: 32
          },
          end: {
            line: 22,
            column: 1
          }
        },
        line: 18
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 27,
            column: 3
          }
        },
        loc: {
          start: {
            line: 27,
            column: 21
          },
          end: {
            line: 30,
            column: 3
          }
        },
        line: 27
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 32,
            column: 16
          },
          end: {
            line: 32,
            column: 17
          }
        },
        loc: {
          start: {
            line: 32,
            column: 22
          },
          end: {
            line: 34,
            column: 3
          }
        },
        line: 32
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 36,
            column: 2
          },
          end: {
            line: 36,
            column: 3
          }
        },
        loc: {
          start: {
            line: 36,
            column: 11
          },
          end: {
            line: 42,
            column: 3
          }
        },
        line: 36
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 45,
            column: 58
          },
          end: {
            line: 45,
            column: 59
          }
        },
        loc: {
          start: {
            line: 45,
            column: 64
          },
          end: {
            line: 132,
            column: 1
          }
        },
        line: 45
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 49,
            column: 13
          },
          end: {
            line: 49,
            column: 14
          }
        },
        loc: {
          start: {
            line: 49,
            column: 19
          },
          end: {
            line: 53,
            column: 3
          }
        },
        line: 49
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 55,
            column: 12
          },
          end: {
            line: 55,
            column: 13
          }
        },
        loc: {
          start: {
            line: 55,
            column: 18
          },
          end: {
            line: 57,
            column: 3
          }
        },
        line: 55
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 59,
            column: 48
          },
          end: {
            line: 59,
            column: 49
          }
        },
        loc: {
          start: {
            line: 59,
            column: 54
          },
          end: {
            line: 102,
            column: 3
          }
        },
        line: 59
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 60,
            column: 22
          },
          end: {
            line: 60,
            column: 23
          }
        },
        loc: {
          start: {
            line: 60,
            column: 28
          },
          end: {
            line: 71,
            column: 5
          }
        },
        line: 60
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 73,
            column: 23
          },
          end: {
            line: 73,
            column: 24
          }
        },
        loc: {
          start: {
            line: 73,
            column: 29
          },
          end: {
            line: 85,
            column: 5
          }
        },
        line: 73
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 87,
            column: 52
          },
          end: {
            line: 87,
            column: 53
          }
        },
        loc: {
          start: {
            line: 87,
            column: 58
          },
          end: {
            line: 101,
            column: 5
          }
        },
        line: 87
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 104,
            column: 52
          },
          end: {
            line: 104,
            column: 53
          }
        },
        loc: {
          start: {
            line: 104,
            column: 58
          },
          end: {
            line: 131,
            column: 3
          }
        },
        line: 104
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 105,
            column: 34
          },
          end: {
            line: 105,
            column: 35
          }
        },
        loc: {
          start: {
            line: 105,
            column: 40
          },
          end: {
            line: 114,
            column: 5
          }
        },
        line: 105
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 116,
            column: 82
          },
          end: {
            line: 116,
            column: 83
          }
        },
        loc: {
          start: {
            line: 116,
            column: 88
          },
          end: {
            line: 130,
            column: 5
          }
        },
        line: 116
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 37,
            column: 11
          },
          end: {
            line: 41,
            column: 12
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 38,
            column: 6
          },
          end: {
            line: 40,
            column: 13
          }
        }, {
          start: {
            line: 41,
            column: 8
          },
          end: {
            line: 41,
            column: 12
          }
        }],
        line: 37
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0
    },
    b: {
      '0': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _react = _interopRequireWildcard(require('react'));

var _reactDom = require('react-dom');

var _ClickOutsideBoundary;

function _load_ClickOutsideBoundary() {
  return _ClickOutsideBoundary = _interopRequireDefault(require('../ClickOutsideBoundary'));
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

cov_2iqct128cv.s[0]++; /**
                        * Copyright (c) 2017-present, Facebook, Inc.
                        * All rights reserved.
                        *
                        * This source code is licensed under the BSD-style license found in the
                        * LICENSE file in the root directory of this source tree. An additional grant
                        * of patent rights can be found in the PATENTS file in the same directory.
                        *
                        * 
                        * @format
                        */

const clickId = id => {
  cov_2iqct128cv.f[0]++;

  const node = (cov_2iqct128cv.s[1]++, document.getElementById(id));
  cov_2iqct128cv.s[2]++;

  if (!(node != null)) {
    throw new Error(`node ${id} should be present in the DOM`);
  }

  cov_2iqct128cv.s[3]++;

  node.click();
};

// A component which removes itself from the DOM when clicked.
// $FlowFixMe(>=0.53.0) Flow suppress
class ClickAway extends _react.Component {
  constructor(props) {
    cov_2iqct128cv.f[1]++;
    cov_2iqct128cv.s[4]++;

    super(props);

    this.handleClick = () => {
      cov_2iqct128cv.f[2]++;
      cov_2iqct128cv.s[6]++;

      this.setState({ visible: false });
    };

    cov_2iqct128cv.s[5]++;
    this.state = { visible: true };
  }

  render() {
    cov_2iqct128cv.f[3]++;
    cov_2iqct128cv.s[7]++;

    return this.state.visible ? (cov_2iqct128cv.b[0][0]++, _react.createElement(
      'span',
      Object.assign({}, this.props, { onClick: this.handleClick }),
      'Click to dismiss'
    )) : (cov_2iqct128cv.b[0][1]++, null);
  }
}

cov_2iqct128cv.s[8]++;
describe('ClickOutsideBoundary - onClickOutside handler', () => {
  cov_2iqct128cv.f[4]++;

  let app;
  let onClickOutside;

  cov_2iqct128cv.s[9]++;
  beforeEach(() => {
    cov_2iqct128cv.f[5]++;
    cov_2iqct128cv.s[10]++;

    app = document.createElement('div');
    cov_2iqct128cv.s[11]++;
    window.document.body.appendChild(app);
    cov_2iqct128cv.s[12]++;
    onClickOutside = jasmine.createSpy('onClickOutside');
  });

  cov_2iqct128cv.s[13]++;
  afterEach(() => {
    cov_2iqct128cv.f[6]++;
    cov_2iqct128cv.s[14]++;

    window.document.body.removeChild(app);
  });

  cov_2iqct128cv.s[15]++;
  describe('_is_ called for an external click', () => {
    cov_2iqct128cv.f[7]++;
    cov_2iqct128cv.s[16]++;

    it('on a parent', () => {
      cov_2iqct128cv.f[8]++;
      cov_2iqct128cv.s[17]++;

      (0, _reactDom.render)(_react.createElement(
        'div',
        { id: 'container' },
        _react.createElement(
          (_ClickOutsideBoundary || _load_ClickOutsideBoundary()).default,
          { onClickOutside: onClickOutside },
          _react.createElement('div', { id: 'target' })
        )
      ), app);
      cov_2iqct128cv.s[18]++;
      clickId('container');
      cov_2iqct128cv.s[19]++;
      expect(onClickOutside).toHaveBeenCalled();
    });

    cov_2iqct128cv.s[20]++;
    it('on a sibling', () => {
      cov_2iqct128cv.f[9]++;
      cov_2iqct128cv.s[21]++;

      (0, _reactDom.render)(_react.createElement(
        'div',
        null,
        _react.createElement(
          (_ClickOutsideBoundary || _load_ClickOutsideBoundary()).default,
          { onClickOutside: onClickOutside },
          _react.createElement('div', { id: 'target' })
        ),
        _react.createElement('div', { id: 'sibling' })
      ), app);
      cov_2iqct128cv.s[22]++;
      clickId('sibling');
      cov_2iqct128cv.s[23]++;
      expect(onClickOutside).toHaveBeenCalled();
    });

    cov_2iqct128cv.s[24]++;
    it('on a sibling that disappears after render', () => {
      cov_2iqct128cv.f[10]++;
      cov_2iqct128cv.s[25]++;

      // This would fail if we tool the approach of ignoring all
      // clicks on elements that were not in the DOM.
      (0, _reactDom.render)(_react.createElement(
        'div',
        null,
        _react.createElement(
          (_ClickOutsideBoundary || _load_ClickOutsideBoundary()).default,
          { onClickOutside: onClickOutside },
          _react.createElement('div', { id: 'target' })
        ),
        _react.createElement(ClickAway, { id: 'click-away' })
      ), app);
      cov_2iqct128cv.s[26]++;
      clickId('click-away');
      cov_2iqct128cv.s[27]++;
      expect(onClickOutside).toHaveBeenCalled();
    });
  });

  cov_2iqct128cv.s[28]++;
  describe('is _not_ called for an internal click', () => {
    cov_2iqct128cv.f[11]++;
    cov_2iqct128cv.s[29]++;

    it('under normal conditions', () => {
      cov_2iqct128cv.f[12]++;
      cov_2iqct128cv.s[30]++;

      (0, _reactDom.render)(_react.createElement(
        (_ClickOutsideBoundary || _load_ClickOutsideBoundary()).default,
        { onClickOutside: onClickOutside },
        _react.createElement('div', { id: 'target' })
      ), app);
      cov_2iqct128cv.s[31]++;
      clickId('target');
      cov_2iqct128cv.s[32]++;
      expect(onClickOutside).not.toHaveBeenCalled();
    });

    cov_2iqct128cv.s[33]++;
    it('when the target leaves the DOM before the event reaches window.document', () => {
      cov_2iqct128cv.f[13]++;

      // A simple approach: `this.rootNode.contains(e.target)` would fail this test.
      const onClickInside = (cov_2iqct128cv.s[34]++, jasmine.createSpy('onClickInside'));
      cov_2iqct128cv.s[35]++;
      (0, _reactDom.render)(_react.createElement(
        (_ClickOutsideBoundary || _load_ClickOutsideBoundary()).default,
        { onClickOutside: onClickOutside },
        _react.createElement(
          'div',
          { onClick: onClickInside },
          _react.createElement(ClickAway, { id: 'click-away' })
        )
      ), app);
      cov_2iqct128cv.s[36]++;
      clickId('click-away');
      cov_2iqct128cv.s[37]++;
      expect(onClickInside).toHaveBeenCalled();
      cov_2iqct128cv.s[38]++;
      expect(onClickOutside).not.toHaveBeenCalled();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNsaWNrT3V0c2lkZUJvdW5kcnktc3BlYy5qcyJdLCJuYW1lcyI6WyJjbGlja0lkIiwiaWQiLCJub2RlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNsaWNrIiwiQ2xpY2tBd2F5IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsImhhbmRsZUNsaWNrIiwic2V0U3RhdGUiLCJ2aXNpYmxlIiwic3RhdGUiLCJyZW5kZXIiLCJkZXNjcmliZSIsImFwcCIsIm9uQ2xpY2tPdXRzaWRlIiwiYmVmb3JlRWFjaCIsImNyZWF0ZUVsZW1lbnQiLCJ3aW5kb3ciLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJqYXNtaW5lIiwiY3JlYXRlU3B5IiwiYWZ0ZXJFYWNoIiwicmVtb3ZlQ2hpbGQiLCJpdCIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJub3QiLCJvbkNsaWNrSW5zaWRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFZQTs7QUFFQTs7OztBQUNBO0FBQUE7QUFBQTs7Ozs7O3VCQWZBOzs7Ozs7Ozs7Ozs7QUFpQkEsTUFBTUEsVUFBV0MsRUFBRCxJQUFnQjtBQUFBOztBQUM5QixRQUFNQywrQkFBT0MsU0FBU0MsY0FBVCxDQUF3QkgsRUFBeEIsQ0FBUCxDQUFOO0FBRDhCOztBQUFBLFFBRXBCQyxRQUFRLElBRlk7QUFBQSxvQkFFTCxRQUFPRCxFQUFHLCtCQUZMO0FBQUE7O0FBQUE7O0FBRzlCQyxPQUFLRyxLQUFMO0FBQ0QsQ0FKRDs7QUFNQTtBQUNBO0FBQ0EsTUFBTUMsU0FBTixTQUF3QixPQUFNQyxTQUE5QixDQUEwRTtBQUN4RUMsY0FBWUMsS0FBWixFQUFtQjtBQUFBO0FBQUE7O0FBQ2pCLFVBQU1BLEtBQU47O0FBRGlCLFNBS25CQyxXQUxtQixHQUtMLE1BQU07QUFBQTtBQUFBOztBQUNsQixXQUFLQyxRQUFMLENBQWMsRUFBQ0MsU0FBUyxLQUFWLEVBQWQ7QUFDRCxLQVBrQjs7QUFBQTtBQUVqQixTQUFLQyxLQUFMLEdBQWEsRUFBQ0QsU0FBUyxJQUFWLEVBQWI7QUFDRDs7QUFNREUsV0FBUztBQUFBO0FBQUE7O0FBQ1AsV0FBTyxLQUFLRCxLQUFMLENBQVdELE9BQVgsOEJBQ0w7QUFBQTtBQUFBLHdCQUFVLEtBQUtILEtBQWYsSUFBc0IsU0FBUyxLQUFLQyxXQUFwQztBQUFBO0FBQUEsS0FESywrQkFJSCxJQUpHLENBQVA7QUFLRDtBQWhCdUU7OztBQW1CMUVLLFNBQVMsK0NBQVQsRUFBMEQsTUFBTTtBQUFBOztBQUM5RCxNQUFJQyxHQUFKO0FBQ0EsTUFBSUMsY0FBSjs7QUFGOEQ7QUFJOURDLGFBQVcsTUFBTTtBQUFBO0FBQUE7O0FBQ2ZGLFVBQU1iLFNBQVNnQixhQUFULENBQXVCLEtBQXZCLENBQU47QUFEZTtBQUVmQyxXQUFPakIsUUFBUCxDQUFnQmtCLElBQWhCLENBQXFCQyxXQUFyQixDQUFpQ04sR0FBakM7QUFGZTtBQUdmQyxxQkFBaUJNLFFBQVFDLFNBQVIsQ0FBa0IsZ0JBQWxCLENBQWpCO0FBQ0QsR0FKRDs7QUFKOEQ7QUFVOURDLFlBQVUsTUFBTTtBQUFBO0FBQUE7O0FBQ2RMLFdBQU9qQixRQUFQLENBQWdCa0IsSUFBaEIsQ0FBcUJLLFdBQXJCLENBQWlDVixHQUFqQztBQUNELEdBRkQ7O0FBVjhEO0FBYzlERCxXQUFTLG1DQUFULEVBQThDLE1BQU07QUFBQTtBQUFBOztBQUNsRFksT0FBRyxhQUFILEVBQWtCLE1BQU07QUFBQTtBQUFBOztBQUN0Qiw0QkFDRTtBQUFBO0FBQUEsVUFBSyxJQUFHLFdBQVI7QUFDRTtBQUFBO0FBQUEsWUFBc0IsZ0JBQWdCVixjQUF0QztBQUNFLHdDQUFLLElBQUcsUUFBUjtBQURGO0FBREYsT0FERixFQU1FRCxHQU5GO0FBRHNCO0FBU3RCaEIsY0FBUSxXQUFSO0FBVHNCO0FBVXRCNEIsYUFBT1gsY0FBUCxFQUF1QlksZ0JBQXZCO0FBQ0QsS0FYRDs7QUFEa0Q7QUFjbERGLE9BQUcsY0FBSCxFQUFtQixNQUFNO0FBQUE7QUFBQTs7QUFDdkIsNEJBQ0U7QUFBQTtBQUFBO0FBQ0U7QUFBQTtBQUFBLFlBQXNCLGdCQUFnQlYsY0FBdEM7QUFDRSx3Q0FBSyxJQUFHLFFBQVI7QUFERixTQURGO0FBSUUsc0NBQUssSUFBRyxTQUFSO0FBSkYsT0FERixFQU9FRCxHQVBGO0FBRHVCO0FBVXZCaEIsY0FBUSxTQUFSO0FBVnVCO0FBV3ZCNEIsYUFBT1gsY0FBUCxFQUF1QlksZ0JBQXZCO0FBQ0QsS0FaRDs7QUFka0Q7QUE0QmxERixPQUFHLDJDQUFILEVBQWdELE1BQU07QUFBQTtBQUFBOztBQUNwRDtBQUNBO0FBQ0EsNEJBQ0U7QUFBQTtBQUFBO0FBQ0U7QUFBQTtBQUFBLFlBQXNCLGdCQUFnQlYsY0FBdEM7QUFDRSx3Q0FBSyxJQUFHLFFBQVI7QUFERixTQURGO0FBSUUsNkJBQUMsU0FBRCxJQUFXLElBQUcsWUFBZDtBQUpGLE9BREYsRUFPRUQsR0FQRjtBQUhvRDtBQVlwRGhCLGNBQVEsWUFBUjtBQVpvRDtBQWFwRDRCLGFBQU9YLGNBQVAsRUFBdUJZLGdCQUF2QjtBQUNELEtBZEQ7QUFlRCxHQTNDRDs7QUFkOEQ7QUEyRDlEZCxXQUFTLHVDQUFULEVBQWtELE1BQU07QUFBQTtBQUFBOztBQUN0RFksT0FBRyx5QkFBSCxFQUE4QixNQUFNO0FBQUE7QUFBQTs7QUFDbEMsNEJBQ0U7QUFBQTtBQUFBLFVBQXNCLGdCQUFnQlYsY0FBdEM7QUFDRSxzQ0FBSyxJQUFHLFFBQVI7QUFERixPQURGLEVBSUVELEdBSkY7QUFEa0M7QUFPbENoQixjQUFRLFFBQVI7QUFQa0M7QUFRbEM0QixhQUFPWCxjQUFQLEVBQXVCYSxHQUF2QixDQUEyQkQsZ0JBQTNCO0FBQ0QsS0FURDs7QUFEc0Q7QUFZdERGLE9BQUcseUVBQUgsRUFBOEUsTUFBTTtBQUFBOztBQUNsRjtBQUNBLFlBQU1JLHlDQUFnQlIsUUFBUUMsU0FBUixDQUFrQixlQUFsQixDQUFoQixDQUFOO0FBRmtGO0FBR2xGLDRCQUNFO0FBQUE7QUFBQSxVQUFzQixnQkFBZ0JQLGNBQXRDO0FBQ0U7QUFBQTtBQUFBLFlBQUssU0FBU2MsYUFBZDtBQUNFLCtCQUFDLFNBQUQsSUFBVyxJQUFHLFlBQWQ7QUFERjtBQURGLE9BREYsRUFNRWYsR0FORjtBQUhrRjtBQVdsRmhCLGNBQVEsWUFBUjtBQVhrRjtBQVlsRjRCLGFBQU9HLGFBQVAsRUFBc0JGLGdCQUF0QjtBQVprRjtBQWFsRkQsYUFBT1gsY0FBUCxFQUF1QmEsR0FBdkIsQ0FBMkJELGdCQUEzQjtBQUNELEtBZEQ7QUFlRCxHQTNCRDtBQTRCRCxDQXZGRCIsImZpbGUiOiJDbGlja091dHNpZGVCb3VuZHJ5LXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQge3JlbmRlcn0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBDbGlja091dHNpZGVCb3VuZGFyeSBmcm9tICcuLi9DbGlja091dHNpZGVCb3VuZGFyeSc7XG5cbmNvbnN0IGNsaWNrSWQgPSAoaWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICBpbnZhcmlhbnQobm9kZSAhPSBudWxsLCBgbm9kZSAke2lkfSBzaG91bGQgYmUgcHJlc2VudCBpbiB0aGUgRE9NYCk7XG4gIG5vZGUuY2xpY2soKTtcbn07XG5cbi8vIEEgY29tcG9uZW50IHdoaWNoIHJlbW92ZXMgaXRzZWxmIGZyb20gdGhlIERPTSB3aGVuIGNsaWNrZWQuXG4vLyAkRmxvd0ZpeE1lKD49MC41My4wKSBGbG93IHN1cHByZXNzXG5jbGFzcyBDbGlja0F3YXkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8JEZsb3dGaXhNZVByb3BzLCAkRmxvd0ZpeE1lU3RhdGU+IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHt2aXNpYmxlOiB0cnVlfTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe3Zpc2libGU6IGZhbHNlfSk7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnZpc2libGUgPyAoXG4gICAgICA8c3BhbiB7Li4udGhpcy5wcm9wc30gb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+XG4gICAgICAgIENsaWNrIHRvIGRpc21pc3NcbiAgICAgIDwvc3Bhbj5cbiAgICApIDogbnVsbDtcbiAgfVxufVxuXG5kZXNjcmliZSgnQ2xpY2tPdXRzaWRlQm91bmRhcnkgLSBvbkNsaWNrT3V0c2lkZSBoYW5kbGVyJywgKCkgPT4ge1xuICBsZXQgYXBwO1xuICBsZXQgb25DbGlja091dHNpZGU7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYXBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYXBwKTtcbiAgICBvbkNsaWNrT3V0c2lkZSA9IGphc21pbmUuY3JlYXRlU3B5KCdvbkNsaWNrT3V0c2lkZScpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFwcCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdfaXNfIGNhbGxlZCBmb3IgYW4gZXh0ZXJuYWwgY2xpY2snLCAoKSA9PiB7XG4gICAgaXQoJ29uIGEgcGFyZW50JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgPENsaWNrT3V0c2lkZUJvdW5kYXJ5IG9uQ2xpY2tPdXRzaWRlPXtvbkNsaWNrT3V0c2lkZX0+XG4gICAgICAgICAgICA8ZGl2IGlkPVwidGFyZ2V0XCIgLz5cbiAgICAgICAgICA8L0NsaWNrT3V0c2lkZUJvdW5kYXJ5PlxuICAgICAgICA8L2Rpdj4sXG4gICAgICAgIGFwcCxcbiAgICAgICk7XG4gICAgICBjbGlja0lkKCdjb250YWluZXInKTtcbiAgICAgIGV4cGVjdChvbkNsaWNrT3V0c2lkZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ29uIGEgc2libGluZycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8Q2xpY2tPdXRzaWRlQm91bmRhcnkgb25DbGlja091dHNpZGU9e29uQ2xpY2tPdXRzaWRlfT5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJ0YXJnZXRcIiAvPlxuICAgICAgICAgIDwvQ2xpY2tPdXRzaWRlQm91bmRhcnk+XG4gICAgICAgICAgPGRpdiBpZD1cInNpYmxpbmdcIiAvPlxuICAgICAgICA8L2Rpdj4sXG4gICAgICAgIGFwcCxcbiAgICAgICk7XG4gICAgICBjbGlja0lkKCdzaWJsaW5nJyk7XG4gICAgICBleHBlY3Qob25DbGlja091dHNpZGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdvbiBhIHNpYmxpbmcgdGhhdCBkaXNhcHBlYXJzIGFmdGVyIHJlbmRlcicsICgpID0+IHtcbiAgICAgIC8vIFRoaXMgd291bGQgZmFpbCBpZiB3ZSB0b29sIHRoZSBhcHByb2FjaCBvZiBpZ25vcmluZyBhbGxcbiAgICAgIC8vIGNsaWNrcyBvbiBlbGVtZW50cyB0aGF0IHdlcmUgbm90IGluIHRoZSBET00uXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPENsaWNrT3V0c2lkZUJvdW5kYXJ5IG9uQ2xpY2tPdXRzaWRlPXtvbkNsaWNrT3V0c2lkZX0+XG4gICAgICAgICAgICA8ZGl2IGlkPVwidGFyZ2V0XCIgLz5cbiAgICAgICAgICA8L0NsaWNrT3V0c2lkZUJvdW5kYXJ5PlxuICAgICAgICAgIDxDbGlja0F3YXkgaWQ9XCJjbGljay1hd2F5XCIgLz5cbiAgICAgICAgPC9kaXY+LFxuICAgICAgICBhcHAsXG4gICAgICApO1xuICAgICAgY2xpY2tJZCgnY2xpY2stYXdheScpO1xuICAgICAgZXhwZWN0KG9uQ2xpY2tPdXRzaWRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpcyBfbm90XyBjYWxsZWQgZm9yIGFuIGludGVybmFsIGNsaWNrJywgKCkgPT4ge1xuICAgIGl0KCd1bmRlciBub3JtYWwgY29uZGl0aW9ucycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENsaWNrT3V0c2lkZUJvdW5kYXJ5IG9uQ2xpY2tPdXRzaWRlPXtvbkNsaWNrT3V0c2lkZX0+XG4gICAgICAgICAgPGRpdiBpZD1cInRhcmdldFwiIC8+XG4gICAgICAgIDwvQ2xpY2tPdXRzaWRlQm91bmRhcnk+LFxuICAgICAgICBhcHAsXG4gICAgICApO1xuICAgICAgY2xpY2tJZCgndGFyZ2V0Jyk7XG4gICAgICBleHBlY3Qob25DbGlja091dHNpZGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnd2hlbiB0aGUgdGFyZ2V0IGxlYXZlcyB0aGUgRE9NIGJlZm9yZSB0aGUgZXZlbnQgcmVhY2hlcyB3aW5kb3cuZG9jdW1lbnQnLCAoKSA9PiB7XG4gICAgICAvLyBBIHNpbXBsZSBhcHByb2FjaDogYHRoaXMucm9vdE5vZGUuY29udGFpbnMoZS50YXJnZXQpYCB3b3VsZCBmYWlsIHRoaXMgdGVzdC5cbiAgICAgIGNvbnN0IG9uQ2xpY2tJbnNpZGUgPSBqYXNtaW5lLmNyZWF0ZVNweSgnb25DbGlja0luc2lkZScpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q2xpY2tPdXRzaWRlQm91bmRhcnkgb25DbGlja091dHNpZGU9e29uQ2xpY2tPdXRzaWRlfT5cbiAgICAgICAgICA8ZGl2IG9uQ2xpY2s9e29uQ2xpY2tJbnNpZGV9PlxuICAgICAgICAgICAgPENsaWNrQXdheSBpZD1cImNsaWNrLWF3YXlcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NsaWNrT3V0c2lkZUJvdW5kYXJ5PixcbiAgICAgICAgYXBwLFxuICAgICAgKTtcbiAgICAgIGNsaWNrSWQoJ2NsaWNrLWF3YXknKTtcbiAgICAgIGV4cGVjdChvbkNsaWNrSW5zaWRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3Qob25DbGlja091dHNpZGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=