'use strict';

var cov_299so4ahkn = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/spec/nice-spec.js',
      hash = 'f2e6ac828499d043354c876f57aa2281a4608416',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/spec/nice-spec.js',
    statementMap: {
      '0': {
        start: {
          line: 18,
          column: 0
        },
        end: {
          line: 110,
          column: 3
        }
      },
      '1': {
        start: {
          line: 19,
          column: 42
        },
        end: {
          line: 19,
          column: 51
        }
      },
      '2': {
        start: {
          line: 21,
          column: 30
        },
        end: {
          line: 21,
          column: 39
        }
      },
      '3': {
        start: {
          line: 22,
          column: 30
        },
        end: {
          line: 22,
          column: 39
        }
      },
      '4': {
        start: {
          line: 23,
          column: 40
        },
        end: {
          line: 23,
          column: 49
        }
      },
      '5': {
        start: {
          line: 24,
          column: 42
        },
        end: {
          line: 24,
          column: 51
        }
      },
      '6': {
        start: {
          line: 27,
          column: 59
        },
        end: {
          line: 27,
          column: 66
        }
      },
      '7': {
        start: {
          line: 29,
          column: 2
        },
        end: {
          line: 46,
          column: 5
        }
      },
      '8': {
        start: {
          line: 30,
          column: 4
        },
        end: {
          line: 30,
          column: 33
        }
      },
      '9': {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 31,
          column: 35
        }
      },
      '10': {
        start: {
          line: 32,
          column: 4
        },
        end: {
          line: 41,
          column: 7
        }
      },
      '11': {
        start: {
          line: 33,
          column: 6
        },
        end: {
          line: 40,
          column: 7
        }
      },
      '12': {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 37,
          column: 23
        }
      },
      '13': {
        start: {
          line: 39,
          column: 8
        },
        end: {
          line: 39,
          column: 20
        }
      },
      '14': {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 44,
          column: 6
        }
      },
      '15': {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 45,
          column: 67
        }
      },
      '16': {
        start: {
          line: 48,
          column: 2
        },
        end: {
          line: 59,
          column: 5
        }
      },
      '17': {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 58,
          column: 7
        }
      },
      '18': {
        start: {
          line: 50,
          column: 26
        },
        end: {
          line: 50,
          column: 28
        }
      },
      '19': {
        start: {
          line: 51,
          column: 21
        },
        end: {
          line: 51,
          column: 69
        }
      },
      '20': {
        start: {
          line: 52,
          column: 6
        },
        end: {
          line: 56,
          column: 8
        }
      },
      '21': {
        start: {
          line: 57,
          column: 6
        },
        end: {
          line: 57,
          column: 47
        }
      },
      '22': {
        start: {
          line: 61,
          column: 2
        },
        end: {
          line: 70,
          column: 5
        }
      },
      '23': {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 69,
          column: 7
        }
      },
      '24': {
        start: {
          line: 63,
          column: 6
        },
        end: {
          line: 63,
          column: 36
        }
      },
      '25': {
        start: {
          line: 64,
          column: 6
        },
        end: {
          line: 64,
          column: 38
        }
      },
      '26': {
        start: {
          line: 65,
          column: 26
        },
        end: {
          line: 65,
          column: 28
        }
      },
      '27': {
        start: {
          line: 66,
          column: 21
        },
        end: {
          line: 66,
          column: 69
        }
      },
      '28': {
        start: {
          line: 67,
          column: 6
        },
        end: {
          line: 67,
          column: 73
        }
      },
      '29': {
        start: {
          line: 68,
          column: 6
        },
        end: {
          line: 68,
          column: 47
        }
      },
      '30': {
        start: {
          line: 72,
          column: 2
        },
        end: {
          line: 84,
          column: 5
        }
      },
      '31': {
        start: {
          line: 73,
          column: 4
        },
        end: {
          line: 83,
          column: 7
        }
      },
      '32': {
        start: {
          line: 74,
          column: 6
        },
        end: {
          line: 74,
          column: 38
        }
      },
      '33': {
        start: {
          line: 75,
          column: 26
        },
        end: {
          line: 75,
          column: 28
        }
      },
      '34': {
        start: {
          line: 76,
          column: 21
        },
        end: {
          line: 76,
          column: 69
        }
      },
      '35': {
        start: {
          line: 77,
          column: 6
        },
        end: {
          line: 81,
          column: 8
        }
      },
      '36': {
        start: {
          line: 82,
          column: 6
        },
        end: {
          line: 82,
          column: 47
        }
      },
      '37': {
        start: {
          line: 86,
          column: 2
        },
        end: {
          line: 99,
          column: 5
        }
      },
      '38': {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 98,
          column: 7
        }
      },
      '39': {
        start: {
          line: 89,
          column: 6
        },
        end: {
          line: 89,
          column: 36
        }
      },
      '40': {
        start: {
          line: 90,
          column: 26
        },
        end: {
          line: 90,
          column: 28
        }
      },
      '41': {
        start: {
          line: 91,
          column: 21
        },
        end: {
          line: 91,
          column: 69
        }
      },
      '42': {
        start: {
          line: 92,
          column: 6
        },
        end: {
          line: 96,
          column: 8
        }
      },
      '43': {
        start: {
          line: 97,
          column: 6
        },
        end: {
          line: 97,
          column: 47
        }
      },
      '44': {
        start: {
          line: 101,
          column: 2
        },
        end: {
          line: 109,
          column: 5
        }
      },
      '45': {
        start: {
          line: 102,
          column: 4
        },
        end: {
          line: 108,
          column: 7
        }
      },
      '46': {
        start: {
          line: 103,
          column: 6
        },
        end: {
          line: 103,
          column: 38
        }
      },
      '47': {
        start: {
          line: 104,
          column: 6
        },
        end: {
          line: 104,
          column: 38
        }
      },
      '48': {
        start: {
          line: 105,
          column: 6
        },
        end: {
          line: 105,
          column: 52
        }
      },
      '49': {
        start: {
          line: 106,
          column: 6
        },
        end: {
          line: 106,
          column: 54
        }
      },
      '50': {
        start: {
          line: 107,
          column: 6
        },
        end: {
          line: 107,
          column: 41
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 18,
            column: 17
          },
          end: {
            line: 18,
            column: 18
          }
        },
        loc: {
          start: {
            line: 18,
            column: 23
          },
          end: {
            line: 110,
            column: 1
          }
        },
        line: 18
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 29,
            column: 13
          },
          end: {
            line: 29,
            column: 14
          }
        },
        loc: {
          start: {
            line: 29,
            column: 19
          },
          end: {
            line: 46,
            column: 3
          }
        },
        line: 29
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 32,
            column: 65
          },
          end: {
            line: 32,
            column: 66
          }
        },
        loc: {
          start: {
            line: 32,
            column: 76
          },
          end: {
            line: 41,
            column: 5
          }
        },
        line: 32
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 48,
            column: 62
          },
          end: {
            line: 48,
            column: 63
          }
        },
        loc: {
          start: {
            line: 48,
            column: 68
          },
          end: {
            line: 59,
            column: 3
          }
        },
        line: 48
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 49,
            column: 20
          },
          end: {
            line: 49,
            column: 21
          }
        },
        loc: {
          start: {
            line: 49,
            column: 32
          },
          end: {
            line: 58,
            column: 5
          }
        },
        line: 49
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 61,
            column: 77
          },
          end: {
            line: 61,
            column: 78
          }
        },
        loc: {
          start: {
            line: 61,
            column: 83
          },
          end: {
            line: 70,
            column: 3
          }
        },
        line: 61
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 62,
            column: 20
          },
          end: {
            line: 62,
            column: 21
          }
        },
        loc: {
          start: {
            line: 62,
            column: 32
          },
          end: {
            line: 69,
            column: 5
          }
        },
        line: 62
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 72,
            column: 62
          },
          end: {
            line: 72,
            column: 63
          }
        },
        loc: {
          start: {
            line: 72,
            column: 68
          },
          end: {
            line: 84,
            column: 3
          }
        },
        line: 72
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 73,
            column: 20
          },
          end: {
            line: 73,
            column: 21
          }
        },
        loc: {
          start: {
            line: 73,
            column: 32
          },
          end: {
            line: 83,
            column: 5
          }
        },
        line: 73
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 86,
            column: 62
          },
          end: {
            line: 86,
            column: 63
          }
        },
        loc: {
          start: {
            line: 86,
            column: 68
          },
          end: {
            line: 99,
            column: 3
          }
        },
        line: 86
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 87,
            column: 20
          },
          end: {
            line: 87,
            column: 21
          }
        },
        loc: {
          start: {
            line: 87,
            column: 32
          },
          end: {
            line: 98,
            column: 5
          }
        },
        line: 87
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 101,
            column: 69
          },
          end: {
            line: 101,
            column: 70
          }
        },
        loc: {
          start: {
            line: 101,
            column: 75
          },
          end: {
            line: 109,
            column: 3
          }
        },
        line: 101
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 102,
            column: 20
          },
          end: {
            line: 102,
            column: 21
          }
        },
        loc: {
          start: {
            line: 102,
            column: 32
          },
          end: {
            line: 108,
            column: 5
          }
        },
        line: 102
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 33,
            column: 6
          },
          end: {
            line: 40,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 33,
            column: 6
          },
          end: {
            line: 40,
            column: 7
          }
        }, {
          start: {
            line: 33,
            column: 6
          },
          end: {
            line: 40,
            column: 7
          }
        }],
        line: 33
      },
      '1': {
        loc: {
          start: {
            line: 34,
            column: 8
          },
          end: {
            line: 35,
            column: 57
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 34,
            column: 9
          },
          end: {
            line: 34,
            column: 30
          }
        }, {
          start: {
            line: 34,
            column: 34
          },
          end: {
            line: 34,
            column: 52
          }
        }, {
          start: {
            line: 35,
            column: 9
          },
          end: {
            line: 35,
            column: 32
          }
        }, {
          start: {
            line: 35,
            column: 36
          },
          end: {
            line: 35,
            column: 56
          }
        }],
        line: 34
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0, 0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _asyncToGenerator = _interopRequireDefault(require('async-to-generator'));

var _testHelpers;

function _load_testHelpers() {
  return _testHelpers = require('../test-helpers');
}

var _rxjsBundlesRxMinJs = require('rxjs/bundles/Rx.min.js');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

cov_299so4ahkn.s[0]++; /**
                        * Copyright (c) 2017-present, Facebook, Inc.
                        * All rights reserved.
                        *
                        * This source code is licensed under the BSD-style license found in the
                        * LICENSE file in the root directory of this source tree. An additional grant
                        * of patent rights can be found in the PATENTS file in the same directory.
                        *
                        * 
                        * @format
                        */

describe('nice', () => {
  cov_299so4ahkn.f[0]++;

  let niceSafeSpawn = (cov_299so4ahkn.s[1]++, null);

  let whichSpy = (cov_299so4ahkn.s[2]++, null);
  let spawnSpy = (cov_299so4ahkn.s[3]++, null);
  let shouldFindNiceCommand = (cov_299so4ahkn.s[4]++, null);
  let shouldFindIoniceCommand = (cov_299so4ahkn.s[5]++, null);
  // All we need here is a unique value to make sure that `nice` returns whatever `safeSpawn`
  // returns
  const fakeSafeSpawnReturn = (cov_299so4ahkn.s[6]++, {});

  cov_299so4ahkn.s[7]++;
  beforeEach(() => {
    cov_299so4ahkn.f[1]++;
    cov_299so4ahkn.s[8]++;

    shouldFindNiceCommand = true;
    cov_299so4ahkn.s[9]++;
    shouldFindIoniceCommand = true;
    cov_299so4ahkn.s[10]++;
    whichSpy = spyOn(require('../which'), 'default').andCallFake(command => {
      cov_299so4ahkn.f[2]++;
      cov_299so4ahkn.s[11]++;

      if ((cov_299so4ahkn.b[1][0]++, shouldFindNiceCommand) && (cov_299so4ahkn.b[1][1]++, command === 'nice') || (cov_299so4ahkn.b[1][2]++, shouldFindIoniceCommand) && (cov_299so4ahkn.b[1][3]++, command === 'ionice')) {
        cov_299so4ahkn.b[0][0]++;
        cov_299so4ahkn.s[12]++;

        return command;
      } else {
        cov_299so4ahkn.b[0][1]++;
        cov_299so4ahkn.s[13]++;

        return null;
      }
    });
    cov_299so4ahkn.s[14]++;
    spawnSpy = spyOn(require('../process'), 'spawn').andReturn(_rxjsBundlesRxMinJs.Observable.of(fakeSafeSpawnReturn));
    cov_299so4ahkn.s[15]++;
    ({ niceSafeSpawn } = (0, (_testHelpers || _load_testHelpers()).uncachedRequire)(require, '../nice'));
  });

  cov_299so4ahkn.s[16]++;
  it('should spawn `nice` and return whatever spawn returns', () => {
    cov_299so4ahkn.f[3]++;
    cov_299so4ahkn.s[17]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_299so4ahkn.f[4]++;

      const execOptions = (cov_299so4ahkn.s[18]++, {});
      const result = (cov_299so4ahkn.s[19]++, yield niceSafeSpawn('echo', ['hi'], execOptions));
      cov_299so4ahkn.s[20]++;
      expect(spawnSpy).toHaveBeenCalledWith('ionice', ['-n', '7', 'nice', 'echo', 'hi'], execOptions);
      cov_299so4ahkn.s[21]++;
      expect(result).toBe(fakeSafeSpawnReturn);
    }));
  });

  cov_299so4ahkn.s[22]++;
  it('should spawn the command normally if nice and ionice cannot be found', () => {
    cov_299so4ahkn.f[5]++;
    cov_299so4ahkn.s[23]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_299so4ahkn.f[6]++;
      cov_299so4ahkn.s[24]++;

      shouldFindNiceCommand = false;
      cov_299so4ahkn.s[25]++;
      shouldFindIoniceCommand = false;
      const execOptions = (cov_299so4ahkn.s[26]++, {});
      const result = (cov_299so4ahkn.s[27]++, yield niceSafeSpawn('echo', ['hi'], execOptions));
      cov_299so4ahkn.s[28]++;
      expect(spawnSpy).toHaveBeenCalledWith('echo', ['hi'], execOptions);
      cov_299so4ahkn.s[29]++;
      expect(result).toBe(fakeSafeSpawnReturn);
    }));
  });

  cov_299so4ahkn.s[30]++;
  it('should spawn with only nice if ionice cannot be found', () => {
    cov_299so4ahkn.f[7]++;
    cov_299so4ahkn.s[31]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_299so4ahkn.f[8]++;
      cov_299so4ahkn.s[32]++;

      shouldFindIoniceCommand = false;
      const execOptions = (cov_299so4ahkn.s[33]++, {});
      const result = (cov_299so4ahkn.s[34]++, yield niceSafeSpawn('echo', ['hi'], execOptions));
      cov_299so4ahkn.s[35]++;
      expect(spawnSpy).toHaveBeenCalledWith('nice', ['echo', 'hi'], execOptions);
      cov_299so4ahkn.s[36]++;
      expect(result).toBe(fakeSafeSpawnReturn);
    }));
  });

  cov_299so4ahkn.s[37]++;
  it('should spawn with only ionice if nice cannot be found', () => {
    cov_299so4ahkn.f[9]++;
    cov_299so4ahkn.s[38]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_299so4ahkn.f[10]++;
      cov_299so4ahkn.s[39]++;

      // I don't know when we would have ionice but not nice, but we may as well support this case.
      shouldFindNiceCommand = false;
      const execOptions = (cov_299so4ahkn.s[40]++, {});
      const result = (cov_299so4ahkn.s[41]++, yield niceSafeSpawn('echo', ['hi'], execOptions));
      cov_299so4ahkn.s[42]++;
      expect(spawnSpy).toHaveBeenCalledWith('ionice', ['-n', '7', 'echo', 'hi'], execOptions);
      cov_299so4ahkn.s[43]++;
      expect(result).toBe(fakeSafeSpawnReturn);
    }));
  });

  cov_299so4ahkn.s[44]++;
  it('should call which only once per command and cache the result', () => {
    cov_299so4ahkn.f[11]++;
    cov_299so4ahkn.s[45]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_299so4ahkn.f[12]++;
      cov_299so4ahkn.s[46]++;

      yield niceSafeSpawn('echo', []);
      cov_299so4ahkn.s[47]++;
      yield niceSafeSpawn('echo', []);
      cov_299so4ahkn.s[48]++;
      expect(whichSpy).toHaveBeenCalledWith('nice');
      cov_299so4ahkn.s[49]++;
      expect(whichSpy).toHaveBeenCalledWith('ionice');
      cov_299so4ahkn.s[50]++;
      expect(whichSpy.callCount).toBe(2);
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5pY2Utc3BlYy5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsIm5pY2VTYWZlU3Bhd24iLCJ3aGljaFNweSIsInNwYXduU3B5Iiwic2hvdWxkRmluZE5pY2VDb21tYW5kIiwic2hvdWxkRmluZElvbmljZUNvbW1hbmQiLCJmYWtlU2FmZVNwYXduUmV0dXJuIiwiYmVmb3JlRWFjaCIsInNweU9uIiwicmVxdWlyZSIsImFuZENhbGxGYWtlIiwiY29tbWFuZCIsImFuZFJldHVybiIsIm9mIiwiaXQiLCJ3YWl0c0ZvclByb21pc2UiLCJleGVjT3B0aW9ucyIsInJlc3VsdCIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidG9CZSIsImNhbGxDb3VudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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LENBQW9CZCxtQkFBcEI7QUFDRCxLQVhEO0FBWUQsR0FiRDs7QUFwRXFCO0FBbUZyQlEsS0FBRyw4REFBSCxFQUFtRSxNQUFNO0FBQUE7QUFBQTs7QUFDdkVDLG1EQUFnQixhQUFZO0FBQUE7QUFBQTs7QUFDMUIsWUFBTWQsY0FBYyxNQUFkLEVBQXNCLEVBQXRCLENBQU47QUFEMEI7QUFFMUIsWUFBTUEsY0FBYyxNQUFkLEVBQXNCLEVBQXRCLENBQU47QUFGMEI7QUFHMUJpQixhQUFPaEIsUUFBUCxFQUFpQmlCLG9CQUFqQixDQUFzQyxNQUF0QztBQUgwQjtBQUkxQkQsYUFBT2hCLFFBQVAsRUFBaUJpQixvQkFBakIsQ0FBc0MsUUFBdEM7QUFKMEI7QUFLMUJELGFBQU9oQixTQUFTbUIsU0FBaEIsRUFBMkJELElBQTNCLENBQWdDLENBQWhDO0FBQ0QsS0FORDtBQU9ELEdBUkQ7QUFTRCxDQTVGRCIsImZpbGUiOiJuaWNlLXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZW9mIHtuaWNlU2FmZVNwYXduIGFzIG5pY2VTYWZlU3Bhd25UeXBlfSBmcm9tICcuLi9uaWNlJztcblxuaW1wb3J0IHt1bmNhY2hlZFJlcXVpcmV9IGZyb20gJy4uL3Rlc3QtaGVscGVycyc7XG5pbXBvcnQge09ic2VydmFibGV9IGZyb20gJ3J4anMnO1xuXG5kZXNjcmliZSgnbmljZScsICgpID0+IHtcbiAgbGV0IG5pY2VTYWZlU3Bhd246IG5pY2VTYWZlU3Bhd25UeXBlID0gKG51bGw6IGFueSk7XG5cbiAgbGV0IHdoaWNoU3B5OiBKYXNtaW5lU3B5ID0gKG51bGw6IGFueSk7XG4gIGxldCBzcGF3blNweTogSmFzbWluZVNweSA9IChudWxsOiBhbnkpO1xuICBsZXQgc2hvdWxkRmluZE5pY2VDb21tYW5kOiBib29sZWFuID0gKG51bGw6IGFueSk7XG4gIGxldCBzaG91bGRGaW5kSW9uaWNlQ29tbWFuZDogYm9vbGVhbiA9IChudWxsOiBhbnkpO1xuICAvLyBBbGwgd2UgbmVlZCBoZXJlIGlzIGEgdW5pcXVlIHZhbHVlIHRvIG1ha2Ugc3VyZSB0aGF0IGBuaWNlYCByZXR1cm5zIHdoYXRldmVyIGBzYWZlU3Bhd25gXG4gIC8vIHJldHVybnNcbiAgY29uc3QgZmFrZVNhZmVTcGF3blJldHVybjogY2hpbGRfcHJvY2VzcyRDaGlsZFByb2Nlc3MgPSAoe306IGFueSk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgc2hvdWxkRmluZE5pY2VDb21tYW5kID0gdHJ1ZTtcbiAgICBzaG91bGRGaW5kSW9uaWNlQ29tbWFuZCA9IHRydWU7XG4gICAgd2hpY2hTcHkgPSBzcHlPbihyZXF1aXJlKCcuLi93aGljaCcpLCAnZGVmYXVsdCcpLmFuZENhbGxGYWtlKGNvbW1hbmQgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAoc2hvdWxkRmluZE5pY2VDb21tYW5kICYmIGNvbW1hbmQgPT09ICduaWNlJykgfHxcbiAgICAgICAgKHNob3VsZEZpbmRJb25pY2VDb21tYW5kICYmIGNvbW1hbmQgPT09ICdpb25pY2UnKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBjb21tYW5kO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc3Bhd25TcHkgPSBzcHlPbihyZXF1aXJlKCcuLi9wcm9jZXNzJyksICdzcGF3bicpLmFuZFJldHVybihcbiAgICAgIE9ic2VydmFibGUub2YoZmFrZVNhZmVTcGF3blJldHVybiksXG4gICAgKTtcbiAgICAoe25pY2VTYWZlU3Bhd259ID0gKHVuY2FjaGVkUmVxdWlyZShyZXF1aXJlLCAnLi4vbmljZScpOiBhbnkpKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzcGF3biBgbmljZWAgYW5kIHJldHVybiB3aGF0ZXZlciBzcGF3biByZXR1cm5zJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZShhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBleGVjT3B0aW9ucyA9IHt9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbmljZVNhZmVTcGF3bignZWNobycsIFsnaGknXSwgZXhlY09wdGlvbnMpO1xuICAgICAgZXhwZWN0KHNwYXduU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ2lvbmljZScsXG4gICAgICAgIFsnLW4nLCAnNycsICduaWNlJywgJ2VjaG8nLCAnaGknXSxcbiAgICAgICAgZXhlY09wdGlvbnMsXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWtlU2FmZVNwYXduUmV0dXJuKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzcGF3biB0aGUgY29tbWFuZCBub3JtYWxseSBpZiBuaWNlIGFuZCBpb25pY2UgY2Fubm90IGJlIGZvdW5kJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZShhc3luYyAoKSA9PiB7XG4gICAgICBzaG91bGRGaW5kTmljZUNvbW1hbmQgPSBmYWxzZTtcbiAgICAgIHNob3VsZEZpbmRJb25pY2VDb21tYW5kID0gZmFsc2U7XG4gICAgICBjb25zdCBleGVjT3B0aW9ucyA9IHt9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbmljZVNhZmVTcGF3bignZWNobycsIFsnaGknXSwgZXhlY09wdGlvbnMpO1xuICAgICAgZXhwZWN0KHNwYXduU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZWNobycsIFsnaGknXSwgZXhlY09wdGlvbnMpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWtlU2FmZVNwYXduUmV0dXJuKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzcGF3biB3aXRoIG9ubHkgbmljZSBpZiBpb25pY2UgY2Fubm90IGJlIGZvdW5kJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZShhc3luYyAoKSA9PiB7XG4gICAgICBzaG91bGRGaW5kSW9uaWNlQ29tbWFuZCA9IGZhbHNlO1xuICAgICAgY29uc3QgZXhlY09wdGlvbnMgPSB7fTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5pY2VTYWZlU3Bhd24oJ2VjaG8nLCBbJ2hpJ10sIGV4ZWNPcHRpb25zKTtcbiAgICAgIGV4cGVjdChzcGF3blNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICduaWNlJyxcbiAgICAgICAgWydlY2hvJywgJ2hpJ10sXG4gICAgICAgIGV4ZWNPcHRpb25zLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFrZVNhZmVTcGF3blJldHVybik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc3Bhd24gd2l0aCBvbmx5IGlvbmljZSBpZiBuaWNlIGNhbm5vdCBiZSBmb3VuZCcsICgpID0+IHtcbiAgICB3YWl0c0ZvclByb21pc2UoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gSSBkb24ndCBrbm93IHdoZW4gd2Ugd291bGQgaGF2ZSBpb25pY2UgYnV0IG5vdCBuaWNlLCBidXQgd2UgbWF5IGFzIHdlbGwgc3VwcG9ydCB0aGlzIGNhc2UuXG4gICAgICBzaG91bGRGaW5kTmljZUNvbW1hbmQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGV4ZWNPcHRpb25zID0ge307XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBuaWNlU2FmZVNwYXduKCdlY2hvJywgWydoaSddLCBleGVjT3B0aW9ucyk7XG4gICAgICBleHBlY3Qoc3Bhd25TcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnaW9uaWNlJyxcbiAgICAgICAgWyctbicsICc3JywgJ2VjaG8nLCAnaGknXSxcbiAgICAgICAgZXhlY09wdGlvbnMsXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWtlU2FmZVNwYXduUmV0dXJuKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjYWxsIHdoaWNoIG9ubHkgb25jZSBwZXIgY29tbWFuZCBhbmQgY2FjaGUgdGhlIHJlc3VsdCcsICgpID0+IHtcbiAgICB3YWl0c0ZvclByb21pc2UoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbmljZVNhZmVTcGF3bignZWNobycsIFtdKTtcbiAgICAgIGF3YWl0IG5pY2VTYWZlU3Bhd24oJ2VjaG8nLCBbXSk7XG4gICAgICBleHBlY3Qod2hpY2hTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCduaWNlJyk7XG4gICAgICBleHBlY3Qod2hpY2hTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdpb25pY2UnKTtcbiAgICAgIGV4cGVjdCh3aGljaFNweS5jYWxsQ291bnQpLnRvQmUoMik7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=