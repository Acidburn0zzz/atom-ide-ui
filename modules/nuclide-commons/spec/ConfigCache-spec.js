'use strict';

var cov_1fxah99sc8 = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/spec/ConfigCache-spec.js',
      hash = '411cb69aa1b5d7ce92786b1aa5ae7d8967e31745',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/spec/ConfigCache-spec.js',
    statementMap: {
      '0': {
        start: {
          line: 16,
          column: 25
        },
        end: {
          line: 16,
          column: 52
        }
      },
      '1': {
        start: {
          line: 17,
          column: 27
        },
        end: {
          line: 17,
          column: 56
        }
      },
      '2': {
        start: {
          line: 19,
          column: 0
        },
        end: {
          line: 56,
          column: 3
        }
      },
      '3': {
        start: {
          line: 20,
          column: 25
        },
        end: {
          line: 20,
          column: 63
        }
      },
      '4': {
        start: {
          line: 21,
          column: 21
        },
        end: {
          line: 21,
          column: 71
        }
      },
      '5': {
        start: {
          line: 22,
          column: 19
        },
        end: {
          line: 22,
          column: 74
        }
      },
      '6': {
        start: {
          line: 23,
          column: 23
        },
        end: {
          line: 26,
          column: 3
        }
      },
      '7': {
        start: {
          line: 27,
          column: 24
        },
        end: {
          line: 30,
          column: 3
        }
      },
      '8': {
        start: {
          line: 31,
          column: 21
        },
        end: {
          line: 34,
          column: 3
        }
      },
      '9': {
        start: {
          line: 36,
          column: 2
        },
        end: {
          line: 46,
          column: 5
        }
      },
      '10': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 45,
          column: 7
        }
      },
      '11': {
        start: {
          line: 38,
          column: 20
        },
        end: {
          line: 38,
          column: 55
        }
      },
      '12': {
        start: {
          line: 40,
          column: 6
        },
        end: {
          line: 40,
          column: 66
        }
      },
      '13': {
        start: {
          line: 41,
          column: 6
        },
        end: {
          line: 41,
          column: 68
        }
      },
      '14': {
        start: {
          line: 42,
          column: 6
        },
        end: {
          line: 42,
          column: 66
        }
      },
      '15': {
        start: {
          line: 43,
          column: 6
        },
        end: {
          line: 43,
          column: 70
        }
      },
      '16': {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 44,
          column: 68
        }
      },
      '17': {
        start: {
          line: 48,
          column: 2
        },
        end: {
          line: 55,
          column: 5
        }
      },
      '18': {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 54,
          column: 7
        }
      },
      '19': {
        start: {
          line: 50,
          column: 20
        },
        end: {
          line: 50,
          column: 75
        }
      },
      '20': {
        start: {
          line: 52,
          column: 6
        },
        end: {
          line: 52,
          column: 68
        }
      },
      '21': {
        start: {
          line: 53,
          column: 6
        },
        end: {
          line: 53,
          column: 74
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 19,
            column: 24
          },
          end: {
            line: 19,
            column: 25
          }
        },
        loc: {
          start: {
            line: 19,
            column: 30
          },
          end: {
            line: 56,
            column: 1
          }
        },
        line: 19
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 36,
            column: 35
          },
          end: {
            line: 36,
            column: 36
          }
        },
        loc: {
          start: {
            line: 36,
            column: 41
          },
          end: {
            line: 46,
            column: 3
          }
        },
        line: 36
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 37,
            column: 20
          },
          end: {
            line: 37,
            column: 21
          }
        },
        loc: {
          start: {
            line: 37,
            column: 32
          },
          end: {
            line: 45,
            column: 5
          }
        },
        line: 37
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 48,
            column: 58
          },
          end: {
            line: 48,
            column: 59
          }
        },
        loc: {
          start: {
            line: 48,
            column: 64
          },
          end: {
            line: 55,
            column: 3
          }
        },
        line: 48
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 49,
            column: 20
          },
          end: {
            line: 49,
            column: 21
          }
        },
        loc: {
          start: {
            line: 49,
            column: 32
          },
          end: {
            line: 54,
            column: 5
          }
        },
        line: 49
      }
    },
    branchMap: {},
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0
    },
    b: {},
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _asyncToGenerator = _interopRequireDefault(require('async-to-generator'));

var _ConfigCache;

function _load_ConfigCache() {
  return _ConfigCache = require('../ConfigCache');
}

var _nuclideUri;

function _load_nuclideUri() {
  return _nuclideUri = _interopRequireDefault(require('../nuclideUri'));
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

const CONFIG_FILE_NAME = (cov_1fxah99sc8.s[0]++, '.test_nuclide_config_file');
const CONFIG_FILE_NAME_2 = (cov_1fxah99sc8.s[1]++, '.test_nuclide_config_file_2');

cov_1fxah99sc8.s[2]++;
describe('ConfigCache', () => {
  cov_1fxah99sc8.f[0]++;

  const noConfigFolder = (cov_1fxah99sc8.s[3]++, (_nuclideUri || _load_nuclideUri()).default.join(__dirname, 'fixtures'));
  const rootFolder = (cov_1fxah99sc8.s[4]++, (_nuclideUri || _load_nuclideUri()).default.join(__dirname, 'fixtures/ConfigCache'));
  const rootFile = (cov_1fxah99sc8.s[5]++, (_nuclideUri || _load_nuclideUri()).default.join(__dirname, 'fixtures/ConfigCache/file'));
  const nestedFolder = (cov_1fxah99sc8.s[6]++, (_nuclideUri || _load_nuclideUri()).default.join(__dirname, 'fixtures/ConfigCache/testFolder'));
  const nestedFolder2 = (cov_1fxah99sc8.s[7]++, (_nuclideUri || _load_nuclideUri()).default.join(__dirname, 'fixtures/ConfigCache/testFolder2'));
  const nestedFile = (cov_1fxah99sc8.s[8]++, (_nuclideUri || _load_nuclideUri()).default.join(__dirname, 'fixtures/ConfigCache/testFolder/file'));

  cov_1fxah99sc8.s[9]++;
  it('finds the right config dir', () => {
    cov_1fxah99sc8.f[1]++;
    cov_1fxah99sc8.s[10]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_1fxah99sc8.f[2]++;

      const cache = (cov_1fxah99sc8.s[11]++, new (_ConfigCache || _load_ConfigCache()).ConfigCache([CONFIG_FILE_NAME]));

      cov_1fxah99sc8.s[12]++;
      expect((yield cache.getConfigDir(noConfigFolder))).toBe(null);
      cov_1fxah99sc8.s[13]++;
      expect((yield cache.getConfigDir(rootFolder))).toBe(rootFolder);
      cov_1fxah99sc8.s[14]++;
      expect((yield cache.getConfigDir(rootFile))).toBe(rootFolder);
      cov_1fxah99sc8.s[15]++;
      expect((yield cache.getConfigDir(nestedFolder))).toBe(rootFolder);
      cov_1fxah99sc8.s[16]++;
      expect((yield cache.getConfigDir(nestedFile))).toBe(rootFolder);
    }));
  });

  cov_1fxah99sc8.s[17]++;
  it('prefers closer matches with multiple config files', () => {
    cov_1fxah99sc8.f[3]++;
    cov_1fxah99sc8.s[18]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_1fxah99sc8.f[4]++;

      const cache = (cov_1fxah99sc8.s[19]++, new (_ConfigCache || _load_ConfigCache()).ConfigCache([CONFIG_FILE_NAME, CONFIG_FILE_NAME_2]));

      cov_1fxah99sc8.s[20]++;
      expect((yield cache.getConfigDir(rootFolder))).toBe(rootFolder);
      cov_1fxah99sc8.s[21]++;
      expect((yield cache.getConfigDir(nestedFolder2))).toBe(nestedFolder2);
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbmZpZ0NhY2hlLXNwZWMuanMiXSwibmFtZXMiOlsiQ09ORklHX0ZJTEVfTkFNRSIsIkNPTkZJR19GSUxFX05BTUVfMiIsImRlc2NyaWJlIiwibm9Db25maWdGb2xkZXIiLCJqb2luIiwiX19kaXJuYW1lIiwicm9vdEZvbGRlciIsInJvb3RGaWxlIiwibmVzdGVkRm9sZGVyIiwibmVzdGVkRm9sZGVyMiIsIm5lc3RlZEZpbGUiLCJpdCIsIndhaXRzRm9yUHJvbWlzZSIsImNhY2hlIiwiZXhwZWN0IiwiZ2V0Q29uZmlnRGlyIiwidG9CZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBWUE7QUFBQTtBQUFBOzs7O0FBQ0E7QUFBQTtBQUFBOzs7O0FBYkE7Ozs7Ozs7Ozs7OztBQWVBLE1BQU1BLDJDQUFtQiwyQkFBbkIsQ0FBTjtBQUNBLE1BQU1DLDZDQUFxQiw2QkFBckIsQ0FBTjs7O0FBRUFDLFNBQVMsYUFBVCxFQUF3QixNQUFNO0FBQUE7O0FBQzVCLFFBQU1DLHlDQUFpQiw0Q0FBV0MsSUFBWCxDQUFnQkMsU0FBaEIsRUFBMkIsVUFBM0IsQ0FBakIsQ0FBTjtBQUNBLFFBQU1DLHFDQUFhLDRDQUFXRixJQUFYLENBQWdCQyxTQUFoQixFQUEyQixzQkFBM0IsQ0FBYixDQUFOO0FBQ0EsUUFBTUUsbUNBQVcsNENBQVdILElBQVgsQ0FBZ0JDLFNBQWhCLEVBQTJCLDJCQUEzQixDQUFYLENBQU47QUFDQSxRQUFNRyx1Q0FBZSw0Q0FBV0osSUFBWCxDQUNuQkMsU0FEbUIsRUFFbkIsaUNBRm1CLENBQWYsQ0FBTjtBQUlBLFFBQU1JLHdDQUFnQiw0Q0FBV0wsSUFBWCxDQUNwQkMsU0FEb0IsRUFFcEIsa0NBRm9CLENBQWhCLENBQU47QUFJQSxRQUFNSyxxQ0FBYSw0Q0FBV04sSUFBWCxDQUNqQkMsU0FEaUIsRUFFakIsc0NBRmlCLENBQWIsQ0FBTjs7QUFaNEI7QUFpQjVCTSxLQUFHLDRCQUFILEVBQWlDLE1BQU07QUFBQTtBQUFBOztBQUNyQ0MsbURBQWdCLGFBQVk7QUFBQTs7QUFDMUIsWUFBTUMsaUNBQVEsc0RBQWdCLENBQUNiLGdCQUFELENBQWhCLENBQVIsQ0FBTjs7QUFEMEI7QUFHMUJjLGNBQU8sTUFBTUQsTUFBTUUsWUFBTixDQUFtQlosY0FBbkIsQ0FBYixHQUFpRGEsSUFBakQsQ0FBc0QsSUFBdEQ7QUFIMEI7QUFJMUJGLGNBQU8sTUFBTUQsTUFBTUUsWUFBTixDQUFtQlQsVUFBbkIsQ0FBYixHQUE2Q1UsSUFBN0MsQ0FBa0RWLFVBQWxEO0FBSjBCO0FBSzFCUSxjQUFPLE1BQU1ELE1BQU1FLFlBQU4sQ0FBbUJSLFFBQW5CLENBQWIsR0FBMkNTLElBQTNDLENBQWdEVixVQUFoRDtBQUwwQjtBQU0xQlEsY0FBTyxNQUFNRCxNQUFNRSxZQUFOLENBQW1CUCxZQUFuQixDQUFiLEdBQStDUSxJQUEvQyxDQUFvRFYsVUFBcEQ7QUFOMEI7QUFPMUJRLGNBQU8sTUFBTUQsTUFBTUUsWUFBTixDQUFtQkwsVUFBbkIsQ0FBYixHQUE2Q00sSUFBN0MsQ0FBa0RWLFVBQWxEO0FBQ0QsS0FSRDtBQVNELEdBVkQ7O0FBakI0QjtBQTZCNUJLLEtBQUcsbURBQUgsRUFBd0QsTUFBTTtBQUFBO0FBQUE7O0FBQzVEQyxtREFBZ0IsYUFBWTtBQUFBOztBQUMxQixZQUFNQyxpQ0FBUSxzREFBZ0IsQ0FBQ2IsZ0JBQUQsRUFBbUJDLGtCQUFuQixDQUFoQixDQUFSLENBQU47O0FBRDBCO0FBRzFCYSxjQUFPLE1BQU1ELE1BQU1FLFlBQU4sQ0FBbUJULFVBQW5CLENBQWIsR0FBNkNVLElBQTdDLENBQWtEVixVQUFsRDtBQUgwQjtBQUkxQlEsY0FBTyxNQUFNRCxNQUFNRSxZQUFOLENBQW1CTixhQUFuQixDQUFiLEdBQWdETyxJQUFoRCxDQUFxRFAsYUFBckQ7QUFDRCxLQUxEO0FBTUQsR0FQRDtBQVFELENBckNEIiwiZmlsZSI6IkNvbmZpZ0NhY2hlLXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQge0NvbmZpZ0NhY2hlfSBmcm9tICcuLi9Db25maWdDYWNoZSc7XG5pbXBvcnQgbnVjbGlkZVVyaSBmcm9tICcuLi9udWNsaWRlVXJpJztcblxuY29uc3QgQ09ORklHX0ZJTEVfTkFNRSA9ICcudGVzdF9udWNsaWRlX2NvbmZpZ19maWxlJztcbmNvbnN0IENPTkZJR19GSUxFX05BTUVfMiA9ICcudGVzdF9udWNsaWRlX2NvbmZpZ19maWxlXzInO1xuXG5kZXNjcmliZSgnQ29uZmlnQ2FjaGUnLCAoKSA9PiB7XG4gIGNvbnN0IG5vQ29uZmlnRm9sZGVyID0gbnVjbGlkZVVyaS5qb2luKF9fZGlybmFtZSwgJ2ZpeHR1cmVzJyk7XG4gIGNvbnN0IHJvb3RGb2xkZXIgPSBudWNsaWRlVXJpLmpvaW4oX19kaXJuYW1lLCAnZml4dHVyZXMvQ29uZmlnQ2FjaGUnKTtcbiAgY29uc3Qgcm9vdEZpbGUgPSBudWNsaWRlVXJpLmpvaW4oX19kaXJuYW1lLCAnZml4dHVyZXMvQ29uZmlnQ2FjaGUvZmlsZScpO1xuICBjb25zdCBuZXN0ZWRGb2xkZXIgPSBudWNsaWRlVXJpLmpvaW4oXG4gICAgX19kaXJuYW1lLFxuICAgICdmaXh0dXJlcy9Db25maWdDYWNoZS90ZXN0Rm9sZGVyJyxcbiAgKTtcbiAgY29uc3QgbmVzdGVkRm9sZGVyMiA9IG51Y2xpZGVVcmkuam9pbihcbiAgICBfX2Rpcm5hbWUsXG4gICAgJ2ZpeHR1cmVzL0NvbmZpZ0NhY2hlL3Rlc3RGb2xkZXIyJyxcbiAgKTtcbiAgY29uc3QgbmVzdGVkRmlsZSA9IG51Y2xpZGVVcmkuam9pbihcbiAgICBfX2Rpcm5hbWUsXG4gICAgJ2ZpeHR1cmVzL0NvbmZpZ0NhY2hlL3Rlc3RGb2xkZXIvZmlsZScsXG4gICk7XG5cbiAgaXQoJ2ZpbmRzIHRoZSByaWdodCBjb25maWcgZGlyJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZShhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYWNoZSA9IG5ldyBDb25maWdDYWNoZShbQ09ORklHX0ZJTEVfTkFNRV0pO1xuXG4gICAgICBleHBlY3QoYXdhaXQgY2FjaGUuZ2V0Q29uZmlnRGlyKG5vQ29uZmlnRm9sZGVyKSkudG9CZShudWxsKTtcbiAgICAgIGV4cGVjdChhd2FpdCBjYWNoZS5nZXRDb25maWdEaXIocm9vdEZvbGRlcikpLnRvQmUocm9vdEZvbGRlcik7XG4gICAgICBleHBlY3QoYXdhaXQgY2FjaGUuZ2V0Q29uZmlnRGlyKHJvb3RGaWxlKSkudG9CZShyb290Rm9sZGVyKTtcbiAgICAgIGV4cGVjdChhd2FpdCBjYWNoZS5nZXRDb25maWdEaXIobmVzdGVkRm9sZGVyKSkudG9CZShyb290Rm9sZGVyKTtcbiAgICAgIGV4cGVjdChhd2FpdCBjYWNoZS5nZXRDb25maWdEaXIobmVzdGVkRmlsZSkpLnRvQmUocm9vdEZvbGRlcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdwcmVmZXJzIGNsb3NlciBtYXRjaGVzIHdpdGggbXVsdGlwbGUgY29uZmlnIGZpbGVzJywgKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZShhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYWNoZSA9IG5ldyBDb25maWdDYWNoZShbQ09ORklHX0ZJTEVfTkFNRSwgQ09ORklHX0ZJTEVfTkFNRV8yXSk7XG5cbiAgICAgIGV4cGVjdChhd2FpdCBjYWNoZS5nZXRDb25maWdEaXIocm9vdEZvbGRlcikpLnRvQmUocm9vdEZvbGRlcik7XG4gICAgICBleHBlY3QoYXdhaXQgY2FjaGUuZ2V0Q29uZmlnRGlyKG5lc3RlZEZvbGRlcjIpKS50b0JlKG5lc3RlZEZvbGRlcjIpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19