'use strict';

var cov_1p49ibg934 = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/spec/event-spec.js',
      hash = 'c2b05d1c938f50634d86a3fc4b5fd965e8c9e92d',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/spec/event-spec.js',
    statementMap: {
      '0': {
        start: {
          line: 17,
          column: 0
        },
        end: {
          line: 30,
          column: 3
        }
      },
      '1': {
        start: {
          line: 18,
          column: 2
        },
        end: {
          line: 29,
          column: 5
        }
      },
      '2': {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 28,
          column: 7
        }
      },
      '3': {
        start: {
          line: 20,
          column: 18
        },
        end: {
          line: 20,
          column: 42
        }
      },
      '4': {
        start: {
          line: 21,
          column: 22
        },
        end: {
          line: 21,
          column: 40
        }
      },
      '5': {
        start: {
          line: 22,
          column: 17
        },
        end: {
          line: 22,
          column: 51
        }
      },
      '6': {
        start: {
          line: 23,
          column: 6
        },
        end: {
          line: 23,
          column: 41
        }
      },
      '7': {
        start: {
          line: 24,
          column: 6
        },
        end: {
          line: 24,
          column: 19
        }
      },
      '8': {
        start: {
          line: 25,
          column: 6
        },
        end: {
          line: 25,
          column: 19
        }
      },
      '9': {
        start: {
          line: 26,
          column: 6
        },
        end: {
          line: 26,
          column: 28
        }
      },
      '10': {
        start: {
          line: 27,
          column: 6
        },
        end: {
          line: 27,
          column: 37
        }
      },
      '11': {
        start: {
          line: 32,
          column: 0
        },
        end: {
          line: 94,
          column: 3
        }
      },
      '12': {
        start: {
          line: 38,
          column: 28
        },
        end: {
          line: 47,
          column: 3
        }
      },
      '13': {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 18
        }
      },
      '14': {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 44,
          column: 6
        }
      },
      '15': {
        start: {
          line: 42,
          column: 8
        },
        end: {
          line: 42,
          column: 24
        }
      },
      '16': {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 45,
          column: 50
        }
      },
      '17': {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 46,
          column: 22
        }
      },
      '18': {
        start: {
          line: 49,
          column: 2
        },
        end: {
          line: 52,
          column: 5
        }
      },
      '19': {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 50,
          column: 20
        }
      },
      '20': {
        start: {
          line: 51,
          column: 4
        },
        end: {
          line: 51,
          column: 22
        }
      },
      '21': {
        start: {
          line: 54,
          column: 2
        },
        end: {
          line: 59,
          column: 5
        }
      },
      '22': {
        start: {
          line: 55,
          column: 23
        },
        end: {
          line: 55,
          column: 73
        }
      },
      '23': {
        start: {
          line: 56,
          column: 4
        },
        end: {
          line: 56,
          column: 32
        }
      },
      '24': {
        start: {
          line: 57,
          column: 4
        },
        end: {
          line: 57,
          column: 35
        }
      },
      '25': {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 58,
          column: 36
        }
      },
      '26': {
        start: {
          line: 61,
          column: 2
        },
        end: {
          line: 72,
          column: 5
        }
      },
      '27': {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 71,
          column: 7
        }
      },
      '28': {
        start: {
          line: 63,
          column: 21
        },
        end: {
          line: 66,
          column: 20
        }
      },
      '29': {
        start: {
          line: 67,
          column: 6
        },
        end: {
          line: 67,
          column: 34
        }
      },
      '30': {
        start: {
          line: 68,
          column: 6
        },
        end: {
          line: 68,
          column: 18
        }
      },
      '31': {
        start: {
          line: 69,
          column: 6
        },
        end: {
          line: 69,
          column: 18
        }
      },
      '32': {
        start: {
          line: 70,
          column: 6
        },
        end: {
          line: 70,
          column: 43
        }
      },
      '33': {
        start: {
          line: 74,
          column: 2
        },
        end: {
          line: 93,
          column: 5
        }
      },
      '34': {
        start: {
          line: 75,
          column: 23
        },
        end: {
          line: 75,
          column: 73
        }
      },
      '35': {
        start: {
          line: 76,
          column: 23
        },
        end: {
          line: 76,
          column: 53
        }
      },
      '36': {
        start: {
          line: 77,
          column: 4
        },
        end: {
          line: 77,
          column: 36
        }
      },
      '37': {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 79,
          column: 34
        }
      },
      '38': {
        start: {
          line: 80,
          column: 4
        },
        end: {
          line: 80,
          column: 54
        }
      },
      '39': {
        start: {
          line: 81,
          column: 4
        },
        end: {
          line: 81,
          column: 31
        }
      },
      '40': {
        start: {
          line: 82,
          column: 4
        },
        end: {
          line: 82,
          column: 50
        }
      },
      '41': {
        start: {
          line: 84,
          column: 4
        },
        end: {
          line: 84,
          column: 32
        }
      },
      '42': {
        start: {
          line: 86,
          column: 4
        },
        end: {
          line: 86,
          column: 50
        }
      },
      '43': {
        start: {
          line: 88,
          column: 4
        },
        end: {
          line: 88,
          column: 36
        }
      },
      '44': {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 90,
          column: 54
        }
      },
      '45': {
        start: {
          line: 91,
          column: 4
        },
        end: {
          line: 91,
          column: 31
        }
      },
      '46': {
        start: {
          line: 92,
          column: 4
        },
        end: {
          line: 92,
          column: 50
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 17,
            column: 24
          },
          end: {
            line: 17,
            column: 25
          }
        },
        loc: {
          start: {
            line: 17,
            column: 30
          },
          end: {
            line: 30,
            column: 1
          }
        },
        line: 17
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 18,
            column: 38
          },
          end: {
            line: 18,
            column: 39
          }
        },
        loc: {
          start: {
            line: 18,
            column: 44
          },
          end: {
            line: 29,
            column: 3
          }
        },
        line: 18
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 19,
            column: 70
          },
          end: {
            line: 19,
            column: 71
          }
        },
        loc: {
          start: {
            line: 19,
            column: 76
          },
          end: {
            line: 28,
            column: 5
          }
        },
        line: 19
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 32,
            column: 44
          },
          end: {
            line: 32,
            column: 45
          }
        },
        loc: {
          start: {
            line: 32,
            column: 50
          },
          end: {
            line: 94,
            column: 1
          }
        },
        line: 32
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 38,
            column: 28
          },
          end: {
            line: 38,
            column: 29
          }
        },
        loc: {
          start: {
            line: 38,
            column: 34
          },
          end: {
            line: 47,
            column: 3
          }
        },
        line: 38
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 49,
            column: 13
          },
          end: {
            line: 49,
            column: 14
          }
        },
        loc: {
          start: {
            line: 49,
            column: 19
          },
          end: {
            line: 52,
            column: 3
          }
        },
        line: 49
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 54,
            column: 88
          },
          end: {
            line: 54,
            column: 89
          }
        },
        loc: {
          start: {
            line: 54,
            column: 94
          },
          end: {
            line: 59,
            column: 3
          }
        },
        line: 54
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 57,
            column: 25
          },
          end: {
            line: 57,
            column: 26
          }
        },
        loc: {
          start: {
            line: 57,
            column: 31
          },
          end: {
            line: 57,
            column: 33
          }
        },
        line: 57
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 61,
            column: 52
          },
          end: {
            line: 61,
            column: 53
          }
        },
        loc: {
          start: {
            line: 61,
            column: 58
          },
          end: {
            line: 72,
            column: 3
          }
        },
        line: 61
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 62,
            column: 20
          },
          end: {
            line: 62,
            column: 21
          }
        },
        loc: {
          start: {
            line: 62,
            column: 32
          },
          end: {
            line: 71,
            column: 5
          }
        },
        line: 62
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 74,
            column: 52
          },
          end: {
            line: 74,
            column: 53
          }
        },
        loc: {
          start: {
            line: 74,
            column: 58
          },
          end: {
            line: 93,
            column: 3
          }
        },
        line: 74
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 76,
            column: 44
          },
          end: {
            line: 76,
            column: 45
          }
        },
        loc: {
          start: {
            line: 76,
            column: 50
          },
          end: {
            line: 76,
            column: 52
          }
        },
        line: 76
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 86,
            column: 40
          },
          end: {
            line: 86,
            column: 41
          }
        },
        loc: {
          start: {
            line: 86,
            column: 46
          },
          end: {
            line: 86,
            column: 48
          }
        },
        line: 86
      }
    },
    branchMap: {},
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0
    },
    b: {},
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _asyncToGenerator = _interopRequireDefault(require('async-to-generator'));

var _events = _interopRequireDefault(require('events'));

var _event;

function _load_event() {
  return _event = require('../event');
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

cov_1p49ibg934.s[0]++;


describe('attachEvent', () => {
  cov_1p49ibg934.f[0]++;
  cov_1p49ibg934.s[1]++;

  describe('the returned disposable', () => {
    cov_1p49ibg934.f[1]++;
    cov_1p49ibg934.s[2]++;

    it("doesn't remove other listeners when disposed multiple times", () => {
      cov_1p49ibg934.f[2]++;

      const foo = (cov_1p49ibg934.s[3]++, jasmine.createSpy('foo'));
      const emitter = (cov_1p49ibg934.s[4]++, new _events.default());
      const d1 = (cov_1p49ibg934.s[5]++, (0, (_event || _load_event()).attachEvent)(emitter, 'event', foo));
      cov_1p49ibg934.s[6]++;
      (0, (_event || _load_event()).attachEvent)(emitter, 'event', foo);
      cov_1p49ibg934.s[7]++;
      d1.dispose();
      cov_1p49ibg934.s[8]++;
      d1.dispose();
      cov_1p49ibg934.s[9]++;
      emitter.emit('event');
      cov_1p49ibg934.s[10]++;
      expect(foo).toHaveBeenCalled();
    });
  });
});

cov_1p49ibg934.s[11]++;
describe('observableFromSubscribeFunction', () => {
  cov_1p49ibg934.f[3]++;

  let callback;
  let disposable;

  // The subscribe function will put the given callback and the returned disposable in the variables
  // above for inspection.
  cov_1p49ibg934.s[12]++;
  const subscribeFunction = fn => {
    cov_1p49ibg934.f[4]++;
    cov_1p49ibg934.s[13]++;

    callback = fn;
    cov_1p49ibg934.s[14]++;
    disposable = {
      dispose() {
        cov_1p49ibg934.s[15]++;

        callback = null;
      }
    };
    cov_1p49ibg934.s[16]++;
    spyOn(disposable, 'dispose').andCallThrough();
    cov_1p49ibg934.s[17]++;
    return disposable;
  };

  cov_1p49ibg934.s[18]++;
  beforeEach(() => {
    cov_1p49ibg934.f[5]++;
    cov_1p49ibg934.s[19]++;

    callback = null;
    cov_1p49ibg934.s[20]++;
    disposable = null;
  });

  cov_1p49ibg934.s[21]++;
  it('should not call the subscription function until the Observable is subscribed to', () => {
    cov_1p49ibg934.f[6]++;

    const observable = (cov_1p49ibg934.s[22]++, (0, (_event || _load_event()).observableFromSubscribeFunction)(subscribeFunction));
    cov_1p49ibg934.s[23]++;
    expect(callback).toBeNull();
    cov_1p49ibg934.s[24]++;
    observable.subscribe(() => {
      cov_1p49ibg934.f[7]++;
    });
    cov_1p49ibg934.s[25]++;
    expect(callback).not.toBeNull();
  });

  cov_1p49ibg934.s[26]++;
  it('should send events to the observable stream', () => {
    cov_1p49ibg934.f[8]++;
    cov_1p49ibg934.s[27]++;

    waitsForPromise((0, _asyncToGenerator.default)(function* () {
      cov_1p49ibg934.f[9]++;

      const result = (cov_1p49ibg934.s[28]++, (0, (_event || _load_event()).observableFromSubscribeFunction)(subscribeFunction).take(2).toArray().toPromise());
      cov_1p49ibg934.s[29]++;

      if (!(callback != null)) {
        throw new Error('Invariant violation: "callback != null"');
      }

      cov_1p49ibg934.s[30]++;

      callback(1);
      cov_1p49ibg934.s[31]++;
      callback(2);
      cov_1p49ibg934.s[32]++;
      expect((yield result)).toEqual([1, 2]);
    }));
  });

  cov_1p49ibg934.s[33]++;
  it('should properly unsubscribe and resubscribe', () => {
    cov_1p49ibg934.f[10]++;

    const observable = (cov_1p49ibg934.s[34]++, (0, (_event || _load_event()).observableFromSubscribeFunction)(subscribeFunction));
    let subscription = (cov_1p49ibg934.s[35]++, observable.subscribe(() => {
      cov_1p49ibg934.f[11]++;
    }));
    cov_1p49ibg934.s[36]++;
    expect(callback).not.toBeNull();

    cov_1p49ibg934.s[37]++;

    if (!(disposable != null)) {
      throw new Error('Invariant violation: "disposable != null"');
    }

    cov_1p49ibg934.s[38]++;

    expect(disposable.dispose).not.toHaveBeenCalled();
    cov_1p49ibg934.s[39]++;
    subscription.unsubscribe();
    cov_1p49ibg934.s[40]++;
    expect(disposable.dispose).toHaveBeenCalled();

    cov_1p49ibg934.s[41]++;
    expect(callback).toBeNull();

    cov_1p49ibg934.s[42]++;
    subscription = observable.subscribe(() => {
      cov_1p49ibg934.f[12]++;
    });

    cov_1p49ibg934.s[43]++;
    expect(callback).not.toBeNull();

    cov_1p49ibg934.s[44]++;
    expect(disposable.dispose).not.toHaveBeenCalled();
    cov_1p49ibg934.s[45]++;
    subscription.unsubscribe();
    cov_1p49ibg934.s[46]++;
    expect(disposable.dispose).toHaveBeenCalled();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LXNwZWMuanMiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJpdCIsImZvbyIsImphc21pbmUiLCJjcmVhdGVTcHkiLCJlbWl0dGVyIiwiZDEiLCJkaXNwb3NlIiwiZW1pdCIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJjYWxsYmFjayIsImRpc3Bvc2FibGUiLCJzdWJzY3JpYmVGdW5jdGlvbiIsImZuIiwic3B5T24iLCJhbmRDYWxsVGhyb3VnaCIsImJlZm9yZUVhY2giLCJvYnNlcnZhYmxlIiwidG9CZU51bGwiLCJzdWJzY3JpYmUiLCJub3QiLCJ3YWl0c0ZvclByb21pc2UiLCJyZXN1bHQiLCJ0YWtlIiwidG9BcnJheSIsInRvUHJvbWlzZSIsInRvRXF1YWwiLCJzdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUNELEtBVEQ7QUFVRCxHQVhEOztBQTdCZ0Q7QUEwQ2hEMUIsS0FBRyw2Q0FBSCxFQUFrRCxNQUFNO0FBQUE7O0FBQ3RELFVBQU1pQixzQ0FBYSwrREFBZ0NMLGlCQUFoQyxDQUFiLENBQU47QUFDQSxRQUFJZSx3Q0FBZVYsV0FBV0UsU0FBWCxDQUFxQixNQUFNO0FBQUE7QUFBRSxLQUE3QixDQUFmLENBQUo7QUFGc0Q7QUFHdERYLFdBQU9FLFFBQVAsRUFBaUJVLEdBQWpCLENBQXFCRixRQUFyQjs7QUFIc0Q7O0FBQUEsVUFLNUNQLGNBQWMsSUFMOEI7QUFBQTtBQUFBOztBQUFBOztBQU10REgsV0FBT0csV0FBV0wsT0FBbEIsRUFBMkJjLEdBQTNCLENBQStCWCxnQkFBL0I7QUFOc0Q7QUFPdERrQixpQkFBYUMsV0FBYjtBQVBzRDtBQVF0RHBCLFdBQU9HLFdBQVdMLE9BQWxCLEVBQTJCRyxnQkFBM0I7O0FBUnNEO0FBVXRERCxXQUFPRSxRQUFQLEVBQWlCUSxRQUFqQjs7QUFWc0Q7QUFZdERTLG1CQUFlVixXQUFXRSxTQUFYLENBQXFCLE1BQU07QUFBQTtBQUFFLEtBQTdCLENBQWY7O0FBWnNEO0FBY3REWCxXQUFPRSxRQUFQLEVBQWlCVSxHQUFqQixDQUFxQkYsUUFBckI7O0FBZHNEO0FBZ0J0RFYsV0FBT0csV0FBV0wsT0FBbEIsRUFBMkJjLEdBQTNCLENBQStCWCxnQkFBL0I7QUFoQnNEO0FBaUJ0RGtCLGlCQUFhQyxXQUFiO0FBakJzRDtBQWtCdERwQixXQUFPRyxXQUFXTCxPQUFsQixFQUEyQkcsZ0JBQTNCO0FBQ0QsR0FuQkQ7QUFvQkQsQ0E5REQiLCJmaWxlIjoiZXZlbnQtc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnYXNzZXJ0JztcbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7YXR0YWNoRXZlbnQsIG9ic2VydmFibGVGcm9tU3Vic2NyaWJlRnVuY3Rpb259IGZyb20gJy4uL2V2ZW50JztcblxuZGVzY3JpYmUoJ2F0dGFjaEV2ZW50JywgKCkgPT4ge1xuICBkZXNjcmliZSgndGhlIHJldHVybmVkIGRpc3Bvc2FibGUnLCAoKSA9PiB7XG4gICAgaXQoXCJkb2Vzbid0IHJlbW92ZSBvdGhlciBsaXN0ZW5lcnMgd2hlbiBkaXNwb3NlZCBtdWx0aXBsZSB0aW1lc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBmb28gPSBqYXNtaW5lLmNyZWF0ZVNweSgnZm9vJyk7XG4gICAgICBjb25zdCBlbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgY29uc3QgZDEgPSBhdHRhY2hFdmVudChlbWl0dGVyLCAnZXZlbnQnLCBmb28pO1xuICAgICAgYXR0YWNoRXZlbnQoZW1pdHRlciwgJ2V2ZW50JywgZm9vKTtcbiAgICAgIGQxLmRpc3Bvc2UoKTtcbiAgICAgIGQxLmRpc3Bvc2UoKTtcbiAgICAgIGVtaXR0ZXIuZW1pdCgnZXZlbnQnKTtcbiAgICAgIGV4cGVjdChmb28pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ29ic2VydmFibGVGcm9tU3Vic2NyaWJlRnVuY3Rpb24nLCAoKSA9PiB7XG4gIGxldCBjYWxsYmFjazogPyhpdGVtOiBudW1iZXIpID0+IG1peGVkO1xuICBsZXQgZGlzcG9zYWJsZTogP0lEaXNwb3NhYmxlO1xuXG4gIC8vIFRoZSBzdWJzY3JpYmUgZnVuY3Rpb24gd2lsbCBwdXQgdGhlIGdpdmVuIGNhbGxiYWNrIGFuZCB0aGUgcmV0dXJuZWQgZGlzcG9zYWJsZSBpbiB0aGUgdmFyaWFibGVzXG4gIC8vIGFib3ZlIGZvciBpbnNwZWN0aW9uLlxuICBjb25zdCBzdWJzY3JpYmVGdW5jdGlvbiA9IGZuID0+IHtcbiAgICBjYWxsYmFjayA9IGZuO1xuICAgIGRpc3Bvc2FibGUgPSB7XG4gICAgICBkaXNwb3NlKCkge1xuICAgICAgICBjYWxsYmFjayA9IG51bGw7XG4gICAgICB9LFxuICAgIH07XG4gICAgc3B5T24oZGlzcG9zYWJsZSwgJ2Rpc3Bvc2UnKS5hbmRDYWxsVGhyb3VnaCgpO1xuICAgIHJldHVybiBkaXNwb3NhYmxlO1xuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICBkaXNwb3NhYmxlID0gbnVsbDtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgY2FsbCB0aGUgc3Vic2NyaXB0aW9uIGZ1bmN0aW9uIHVudGlsIHRoZSBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQgdG8nLCAoKSA9PiB7XG4gICAgY29uc3Qgb2JzZXJ2YWJsZSA9IG9ic2VydmFibGVGcm9tU3Vic2NyaWJlRnVuY3Rpb24oc3Vic2NyaWJlRnVuY3Rpb24pO1xuICAgIGV4cGVjdChjYWxsYmFjaykudG9CZU51bGwoKTtcbiAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSgoKSA9PiB7fSk7XG4gICAgZXhwZWN0KGNhbGxiYWNrKS5ub3QudG9CZU51bGwoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzZW5kIGV2ZW50cyB0byB0aGUgb2JzZXJ2YWJsZSBzdHJlYW0nLCAoKSA9PiB7XG4gICAgd2FpdHNGb3JQcm9taXNlKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG9ic2VydmFibGVGcm9tU3Vic2NyaWJlRnVuY3Rpb24oc3Vic2NyaWJlRnVuY3Rpb24pXG4gICAgICAgIC50YWtlKDIpXG4gICAgICAgIC50b0FycmF5KClcbiAgICAgICAgLnRvUHJvbWlzZSgpO1xuICAgICAgaW52YXJpYW50KGNhbGxiYWNrICE9IG51bGwpO1xuICAgICAgY2FsbGJhY2soMSk7XG4gICAgICBjYWxsYmFjaygyKTtcbiAgICAgIGV4cGVjdChhd2FpdCByZXN1bHQpLnRvRXF1YWwoWzEsIDJdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBwcm9wZXJseSB1bnN1YnNjcmliZSBhbmQgcmVzdWJzY3JpYmUnLCAoKSA9PiB7XG4gICAgY29uc3Qgb2JzZXJ2YWJsZSA9IG9ic2VydmFibGVGcm9tU3Vic2NyaWJlRnVuY3Rpb24oc3Vic2NyaWJlRnVuY3Rpb24pO1xuICAgIGxldCBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlLnN1YnNjcmliZSgoKSA9PiB7fSk7XG4gICAgZXhwZWN0KGNhbGxiYWNrKS5ub3QudG9CZU51bGwoKTtcblxuICAgIGludmFyaWFudChkaXNwb3NhYmxlICE9IG51bGwpO1xuICAgIGV4cGVjdChkaXNwb3NhYmxlLmRpc3Bvc2UpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgZXhwZWN0KGRpc3Bvc2FibGUuZGlzcG9zZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuXG4gICAgZXhwZWN0KGNhbGxiYWNrKS50b0JlTnVsbCgpO1xuXG4gICAgc3Vic2NyaXB0aW9uID0gb2JzZXJ2YWJsZS5zdWJzY3JpYmUoKCkgPT4ge30pO1xuXG4gICAgZXhwZWN0KGNhbGxiYWNrKS5ub3QudG9CZU51bGwoKTtcblxuICAgIGV4cGVjdChkaXNwb3NhYmxlLmRpc3Bvc2UpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgZXhwZWN0KGRpc3Bvc2FibGUuZGlzcG9zZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcbn0pO1xuIl19